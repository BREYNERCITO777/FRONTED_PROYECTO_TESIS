{"ast":null,"code":"import React,{useEffect,useMemo,useState}from\"react\";import{Card,CardContent,CardHeader,CardTitle}from\"../../../shared/ui/card\";import{Badge}from\"../../../shared/ui/badge\";import{Button}from\"../../../shared/ui/button\";import{Camera,Activity,AlertTriangle,Clock,TrendingUp,TrendingDown,Eye,MapPin,ChevronRight,ShieldCheck,AlertOctagon,ChevronLeft}from\"lucide-react\";import{Table,TableBody,TableCell,TableHead,TableHeader,TableRow}from\"../../../shared/ui/table\";import{listCameras}from\"../../../api/cameras\";import{listAlerts}from\"../../../api/alerts\";import{listIncidents}from\"../../../api/incidents\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function Dashboard(){// ✅ PAGINACIÓN\nconst pageSize=10;const[page,setPage]=useState(1);// ✅ DATA BACKEND\nconst[loading,setLoading]=useState(true);const[cameras,setCameras]=useState([]);const[alerts,setAlerts]=useState([]);const[incidents,setIncidents]=useState([]);useEffect(()=>{(async()=>{try{const[cams,als,inc]=await Promise.all([listCameras(),listAlerts(),listIncidents()]);setCameras(Array.isArray(cams)?cams:[]);setAlerts(Array.isArray(als)?als:[]);setIncidents(Array.isArray(inc)?inc:[]);}catch(e){var _e$response;console.error(\"Dashboard API error:\",e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:_e$response.status,e===null||e===void 0?void 0:e.message);}finally{setLoading(false);}})();},[]);const recentActivity=useMemo(()=>{const sorted=[...alerts].sort((a,b)=>{const ta=new Date(a.created_at||a.timestamp||0).getTime();const tb=new Date(b.created_at||b.timestamp||0).getTime();return tb-ta;});return sorted.map((a,idx)=>{var _ref,_a$confidence,_a$id;const t=new Date(a.created_at||a.timestamp||Date.now());const confidenceRaw=(_ref=(_a$confidence=a.confidence)!==null&&_a$confidence!==void 0?_a$confidence:a.score)!==null&&_ref!==void 0?_ref:0;const confidence=confidenceRaw>1?confidenceRaw/100:confidenceRaw;// 0-100 o 0-1\nconst sev=a.severity||(confidence>=0.9?\"critical\":confidence>=0.8?\"high\":confidence>=0.7?\"medium\":\"low\");return{id:(_a$id=a.id)!==null&&_a$id!==void 0?_a$id:idx,weaponType:a.weapon_type||a.type||a.label||\"Detección\",confidence:Math.max(0,Math.min(1,Number(confidence)||0)),camera:String(a.camera_code||a.camera_id||a.camera||\"CAM-?\"),cameraName:a.camera_name||a.cameraName||\"\",location:a.location||a.zone||\"\",timestamp:Number.isFinite(t.getTime())?t.toLocaleTimeString():\"\",date:Number.isFinite(t.getTime())?t.toLocaleDateString():\"\",severity:sev};});},[alerts]);// KPIs dinámicos\nconst totalCameras=cameras.length;const activeCameras=cameras.filter(c=>{if(typeof c.is_active===\"boolean\")return c.is_active;if(typeof c.active===\"boolean\")return c.active;if(typeof c.status===\"string\")return c.status.toLowerCase()===\"active\";return false;}).length;const today=new Date();const isToday=d=>d.getFullYear()===today.getFullYear()&&d.getMonth()===today.getMonth()&&d.getDate()===today.getDate();const incidentsToday=incidents.filter(i=>{const t=new Date(i.created_at||i.timestamp||0);return Number.isFinite(t.getTime())&&isToday(t);}).length;const lastAlert=recentActivity[0];const kpiData=[{title:\"Cámaras Registradas\",value:String(totalCameras),subtitle:\"Total en sistema\",change:\"\",trend:\"neutral\",icon:Camera,color:\"text-primary\",bgColor:\"bg-primary/10\"},{title:\"Cámaras Activas\",value:String(activeCameras),subtitle:\"\".concat(Math.max(0,totalCameras-activeCameras),\" inactivas\"),change:totalCameras?\"\".concat(Math.round(activeCameras/totalCameras*100),\"%\"):\"0%\",trend:\"neutral\",icon:Activity,color:\"text-emerald-600\",bgColor:\"bg-emerald-500/10\"},{title:\"Incidentes Hoy\",value:String(incidentsToday),subtitle:\"Hoy\",change:\"\",trend:\"neutral\",icon:AlertTriangle,color:\"text-amber-600\",bgColor:\"bg-amber-500/10\"},{title:\"Última Alerta\",value:lastAlert?\"Reciente\":\"—\",subtitle:lastAlert?String(lastAlert.camera):\"Sin alertas\",change:\"\",trend:\"neutral\",icon:Clock,color:\"text-destructive\",bgColor:\"bg-destructive/10\"}];const totalPages=Math.max(1,Math.ceil(recentActivity.length/pageSize));const pageData=useMemo(()=>{const start=(page-1)*pageSize;return recentActivity.slice(start,start+pageSize);},[page,recentActivity]);// Si cambian los datos y la página queda fuera, reajusta\nuseEffect(()=>{if(page>totalPages)setPage(totalPages);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[totalPages]);const canPrev=page>1;const canNext=page<totalPages;const goPrev=()=>setPage(p=>Math.max(1,p-1));const goNext=()=>setPage(p=>Math.min(totalPages,p+1));if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"p-6 text-sm text-muted-foreground\",children:\"Cargando Dashboard...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full flex flex-col gap-4 text-foreground animate-in fade-in duration-500 overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shrink-0 flex flex-col md:flex-row md:items-center justify-between gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-0.5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl md:text-2xl font-bold tracking-tight\",children:\"Panel de Control\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted-foreground text-xs md:text-sm\",children:\"Monitoreo en tiempo real del sistema de detecci\\xF3n inteligente\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 bg-card border border-border rounded-xl px-3 py-2 shadow-sm self-start md:self-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-2 w-2 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_8px_rgba(16,185,129,0.5)]\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[11px] font-bold uppercase tracking-wider\",children:\"Sistema Activo\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4 w-px bg-border\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right leading-tight\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-muted-foreground font-bold uppercase\",children:\"\\xDAltima Sync\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[11px] font-bold\",children:\"Live\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"shrink-0 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4\",children:kpiData.map(kpi=>{const Icon=kpi.icon;return/*#__PURE__*/_jsx(Card,{className:\"bg-card border-border shadow-sm hover:shadow-md transition-all\",children:/*#__PURE__*/_jsxs(CardContent,{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(kpi.bgColor,\" p-2 rounded-lg\"),children:/*#__PURE__*/_jsx(Icon,{className:\"h-4 w-4 \".concat(kpi.color)})}),kpi.trend!==\"neutral\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 px-2 py-0.5 rounded-md text-[10px] font-bold border \".concat(kpi.trend===\"up\"?\"text-emerald-600 bg-emerald-50 border-emerald-100\":\"text-destructive bg-destructive/5 border-destructive/10\"),children:[kpi.trend===\"up\"?/*#__PURE__*/_jsx(TrendingUp,{size:10}):/*#__PURE__*/_jsx(TrendingDown,{size:10}),kpi.change]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest mb-1\",children:kpi.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold truncate\",children:kpi.value}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-muted-foreground mt-1 font-medium\",children:kpi.subtitle})]})]})},kpi.title);})}),/*#__PURE__*/_jsx(\"div\",{className:\"shrink-0 w-full rounded-2xl border border-destructive/20 bg-gradient-to-br from-destructive/5 via-card to-destructive/5 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row lg:items-center gap-4 px-5 py-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hidden lg:flex h-10 w-10 items-center justify-center rounded-2xl bg-destructive text-white shadow-md shadow-destructive/20\",children:/*#__PURE__*/_jsx(AlertOctagon,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-5 w-5 text-destructive lg:hidden mt-0.5 shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-base font-bold text-destructive leading-tight truncate\",children:lastAlert?\"\\xDAltima detecci\\xF3n: \".concat(lastAlert.weaponType):\"Sin alertas recientes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-muted-foreground truncate\",children:lastAlert?\"Revisa evidencia y toma acción.\":\"Cuando existan alertas, aquí verás la más reciente.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(Badge,{className:\"bg-destructive hover:bg-destructive font-bold px-2.5 py-0.5 text-[11px] text-destructive-foreground\",children:lastAlert?lastAlert.weaponType:\"—\"}),/*#__PURE__*/_jsx(Badge,{variant:\"outline\",className:\"bg-background border-destructive/20 text-destructive font-bold px-2.5 py-0.5 text-[11px]\",children:lastAlert?\"\".concat(Math.round(lastAlert.confidence*100),\"% Confianza\"):\"—\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-2\",children:[{icon:Camera,label:\"Cámara\",val:lastAlert?lastAlert.camera:\"—\"},{icon:MapPin,label:\"Zona\",val:lastAlert?lastAlert.location||\"—\":\"—\"},{icon:Clock,label:\"Hora\",val:lastAlert?lastAlert.timestamp:\"—\"}].map((item,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-muted/20 px-3 py-2 rounded-xl border border-border/40 overflow-hidden\",children:[/*#__PURE__*/_jsx(item.icon,{size:14,className:\"text-destructive shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[9px] font-bold text-muted-foreground uppercase tracking-tighter\",children:item.label}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-bold truncate\",children:item.val})]})]},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row lg:flex-col gap-2 w-full lg:w-auto lg:shrink-0\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",className:\"flex-1 lg:flex-none bg-destructive hover:bg-destructive/90 text-white font-bold h-9 px-4\",disabled:!lastAlert,onClick:()=>{if(!lastAlert)return;console.log(\"Ver evidencia de alerta:\",lastAlert.id);},children:\"Evidencia\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",className:\"flex-1 lg:flex-none h-9 px-4 font-bold bg-background\",disabled:!lastAlert,onClick:()=>{if(!lastAlert)return;console.log(\"Ignorar alerta:\",lastAlert.id);},children:\"Ignorar\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-h-0 grid grid-cols-1 lg:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(Card,{className:\"lg:col-span-2 border-border shadow-sm flex flex-col min-h-0\",children:[/*#__PURE__*/_jsxs(CardHeader,{className:\"flex flex-row items-center justify-between border-b bg-muted/20 px-5 py-3 shrink-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-card-foreground\",children:[/*#__PURE__*/_jsx(Activity,{className:\"h-4 w-4 text-primary\"}),/*#__PURE__*/_jsx(CardTitle,{className:\"text-base font-bold\",children:\"Actividad Reciente\"})]}),/*#__PURE__*/_jsxs(Button,{variant:\"ghost\",size:\"sm\",className:\"text-xs font-bold text-primary hover:bg-primary/5\",onClick:()=>console.log(\"Ir a historial\"),children:[\"Historial \",/*#__PURE__*/_jsx(ChevronRight,{size:14})]})]}),/*#__PURE__*/_jsx(CardContent,{className:\"p-0 flex-1 min-h-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full overflow-x-auto\",children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHeader,{children:/*#__PURE__*/_jsxs(TableRow,{className:\"bg-muted/30 hover:bg-muted/30 border-b\",children:[/*#__PURE__*/_jsx(TableHead,{className:\"font-bold text-[10px] uppercase tracking-wider px-5\",children:\"Detecci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-5 py-3 text-left font-bold text-[10px] uppercase tracking-wider text-muted-foreground\",children:\"IA\"}),/*#__PURE__*/_jsx(TableHead,{className:\"font-bold text-[10px] uppercase tracking-wider px-5\",children:\"C\\xE1mara\"}),/*#__PURE__*/_jsx(TableHead,{className:\"font-bold text-[10px] uppercase tracking-wider px-5 text-center\",children:\"Nivel\"}),/*#__PURE__*/_jsx(TableHead,{className:\"text-right font-bold text-[10px] uppercase tracking-wider px-5\",children:\"Acci\\xF3n\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:pageData.length===0?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{className:\"px-5 py-6 text-sm text-muted-foreground\",colSpan:5,children:\"No hay actividad reciente.\"})}):pageData.map(incident=>/*#__PURE__*/_jsxs(TableRow,{className:\"hover:bg-muted/10 transition-colors border-b last:border-0 group\",children:[/*#__PURE__*/_jsx(TableCell,{className:\"px-5 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-2 w-2 rounded-full shrink-0 \".concat(incident.severity===\"critical\"?\"bg-destructive animate-pulse\":incident.severity===\"high\"?\"bg-orange-500\":incident.severity===\"medium\"?\"bg-amber-500\":\"bg-emerald-500\")}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold truncate max-w-[160px]\",children:incident.weaponType})]})}),/*#__PURE__*/_jsx(TableCell,{className:\"px-5 py-3\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs font-mono font-bold\",children:[(incident.confidence*100).toFixed(0),\"%\"]})}),/*#__PURE__*/_jsxs(TableCell,{className:\"px-5 py-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-bold truncate max-w-[180px]\",children:incident.camera}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-muted-foreground\",children:incident.timestamp})]}),/*#__PURE__*/_jsx(TableCell,{className:\"px-5 py-3 text-center\",children:/*#__PURE__*/_jsx(Badge,{variant:\"outline\",className:\"text-[9px] font-bold uppercase \".concat(incident.severity===\"critical\"?\"bg-destructive/10 text-destructive border-destructive/20\":\"bg-muted text-foreground\"),children:incident.severity})}),/*#__PURE__*/_jsx(TableCell,{className:\"px-5 py-3 text-right\",children:/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"ghost\",className:\"h-8 w-8 p-0\",onClick:()=>console.log(\"Ver detalle:\",incident.id),children:/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4\"})})})]},incident.id))})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"shrink-0 border-t px-5 py-2.5 bg-white flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-muted-foreground font-medium\",children:[\"Mostrando\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-slate-900\",children:recentActivity.length?(page-1)*pageSize+1:0}),\" - \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-slate-900\",children:Math.min(page*pageSize,recentActivity.length)}),\" de\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-slate-900\",children:recentActivity.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline\",size:\"sm\",className:\"h-8\",onClick:goPrev,disabled:!canPrev,children:[/*#__PURE__*/_jsx(ChevronLeft,{className:\"h-4 w-4 mr-1\"}),\"Anterior\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs font-bold px-2\",children:[page,\" / \",totalPages]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline\",size:\"sm\",className:\"h-8\",onClick:goNext,disabled:!canNext,children:[\"Siguiente\",/*#__PURE__*/_jsx(ChevronRight,{className:\"h-4 w-4 ml-1\"})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"min-h-0\",children:/*#__PURE__*/_jsxs(Card,{className:\"border-border shadow-sm bg-card text-card-foreground h-full flex flex-col\",children:[/*#__PURE__*/_jsx(CardHeader,{className:\"pb-2 border-b px-5 py-3 shrink-0\",children:/*#__PURE__*/_jsxs(CardTitle,{className:\"text-[11px] font-bold uppercase tracking-widest flex items-center gap-2\",children:[/*#__PURE__*/_jsx(ShieldCheck,{size:16,className:\"text-primary\"}),\" Distribuci\\xF3n\"]})}),/*#__PURE__*/_jsx(CardContent,{className:\"pt-4 px-5 space-y-3\",children:[{label:\"Pistola\",val:75,color:\"bg-primary\"},{label:\"Rifle\",val:15,color:\"bg-indigo-500\"},{label:\"Cuchillo\",val:10,color:\"bg-amber-500\"}].map((item,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1.5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-[10px] font-bold\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.label}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-muted-foreground\",children:[item.val,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-muted h-1.5 rounded-full overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(item.color,\" h-full rounded-full transition-all\"),style:{width:\"\".concat(item.val,\"%\")}})})]},idx))})]})})]})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","Card","CardContent","CardHeader","CardTitle","Badge","Button","Camera","Activity","AlertTriangle","Clock","TrendingUp","TrendingDown","Eye","MapPin","ChevronRight","ShieldCheck","AlertOctagon","ChevronLeft","Table","TableBody","TableCell","TableHead","TableHeader","TableRow","listCameras","listAlerts","listIncidents","jsx","_jsx","jsxs","_jsxs","Dashboard","pageSize","page","setPage","loading","setLoading","cameras","setCameras","alerts","setAlerts","incidents","setIncidents","cams","als","inc","Promise","all","Array","isArray","e","_e$response","console","error","response","status","message","recentActivity","sorted","sort","a","b","ta","Date","created_at","timestamp","getTime","tb","map","idx","_ref","_a$confidence","_a$id","t","now","confidenceRaw","confidence","score","sev","severity","id","weaponType","weapon_type","type","label","Math","max","min","Number","camera","String","camera_code","camera_id","cameraName","camera_name","location","zone","isFinite","toLocaleTimeString","date","toLocaleDateString","totalCameras","length","activeCameras","filter","c","is_active","active","toLowerCase","today","isToday","d","getFullYear","getMonth","getDate","incidentsToday","i","lastAlert","kpiData","title","value","subtitle","change","trend","icon","color","bgColor","concat","round","totalPages","ceil","pageData","start","slice","canPrev","canNext","goPrev","p","goNext","className","children","kpi","Icon","size","variant","val","item","disabled","onClick","log","colSpan","incident","toFixed","style","width"],"sources":["D:/PROYECTO DE TESIS AÑO 2026/sistema-armas/frontend/src/modules/dashboard/ui/Dashboard.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"../../../shared/ui/card\";\r\nimport { Badge } from \"../../../shared/ui/badge\";\r\nimport { Button } from \"../../../shared/ui/button\";\r\nimport {\r\n  Camera,\r\n  Activity,\r\n  AlertTriangle,\r\n  Clock,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  Eye,\r\n  MapPin,\r\n  ChevronRight,\r\n  ShieldCheck,\r\n  AlertOctagon,\r\n  ChevronLeft,\r\n} from \"lucide-react\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"../../../shared/ui/table\";\r\n\r\nimport { listCameras } from \"../../../api/cameras\";\r\nimport { listAlerts } from \"../../../api/alerts\";\r\nimport { listIncidents } from \"../../../api/incidents\";\r\n\r\ntype UiRecentItem = {\r\n  id: string | number;\r\n  weaponType: string;\r\n  confidence: number; // 0..1\r\n  camera: string;\r\n  cameraName?: string;\r\n  location?: string;\r\n  timestamp: string;\r\n  date: string;\r\n  severity: \"low\" | \"medium\" | \"high\" | \"critical\";\r\n};\r\n\r\nexport function Dashboard() {\r\n  // ✅ PAGINACIÓN\r\n  const pageSize = 10;\r\n  const [page, setPage] = useState(1);\r\n\r\n  // ✅ DATA BACKEND\r\n  const [loading, setLoading] = useState(true);\r\n  const [cameras, setCameras] = useState<any[]>([]);\r\n  const [alerts, setAlerts] = useState<any[]>([]);\r\n  const [incidents, setIncidents] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const [cams, als, inc] = await Promise.all([listCameras(), listAlerts(), listIncidents()]);\r\n        setCameras(Array.isArray(cams) ? cams : []);\r\n        setAlerts(Array.isArray(als) ? als : []);\r\n        setIncidents(Array.isArray(inc) ? inc : []);\r\n      } catch (e: any) {\r\n        console.error(\"Dashboard API error:\", e?.response?.status, e?.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const recentActivity: UiRecentItem[] = useMemo(() => {\r\n    const sorted = [...alerts].sort((a, b) => {\r\n      const ta = new Date(a.created_at || a.timestamp || 0).getTime();\r\n      const tb = new Date(b.created_at || b.timestamp || 0).getTime();\r\n      return tb - ta;\r\n    });\r\n\r\n    return sorted.map((a: any, idx: number) => {\r\n      const t = new Date(a.created_at || a.timestamp || Date.now());\r\n      const confidenceRaw = a.confidence ?? a.score ?? 0;\r\n      const confidence = confidenceRaw > 1 ? confidenceRaw / 100 : confidenceRaw; // 0-100 o 0-1\r\n\r\n      const sev =\r\n        a.severity ||\r\n        (confidence >= 0.9 ? \"critical\" : confidence >= 0.8 ? \"high\" : confidence >= 0.7 ? \"medium\" : \"low\");\r\n\r\n      return {\r\n        id: a.id ?? idx,\r\n        weaponType: a.weapon_type || a.type || a.label || \"Detección\",\r\n        confidence: Math.max(0, Math.min(1, Number(confidence) || 0)),\r\n        camera: String(a.camera_code || a.camera_id || a.camera || \"CAM-?\"),\r\n        cameraName: a.camera_name || a.cameraName || \"\",\r\n        location: a.location || a.zone || \"\",\r\n        timestamp: Number.isFinite(t.getTime()) ? t.toLocaleTimeString() : \"\",\r\n        date: Number.isFinite(t.getTime()) ? t.toLocaleDateString() : \"\",\r\n        severity: sev,\r\n      };\r\n    });\r\n  }, [alerts]);\r\n\r\n  // KPIs dinámicos\r\n  const totalCameras = cameras.length;\r\n\r\n  const activeCameras = cameras.filter((c: any) => {\r\n    if (typeof c.is_active === \"boolean\") return c.is_active;\r\n    if (typeof c.active === \"boolean\") return c.active;\r\n    if (typeof c.status === \"string\") return c.status.toLowerCase() === \"active\";\r\n    return false;\r\n  }).length;\r\n\r\n  const today = new Date();\r\n  const isToday = (d: Date) =>\r\n    d.getFullYear() === today.getFullYear() && d.getMonth() === today.getMonth() && d.getDate() === today.getDate();\r\n\r\n  const incidentsToday = incidents.filter((i: any) => {\r\n    const t = new Date(i.created_at || i.timestamp || 0);\r\n    return Number.isFinite(t.getTime()) && isToday(t);\r\n  }).length;\r\n\r\n  const lastAlert = recentActivity[0];\r\n\r\n  const kpiData = [\r\n    {\r\n      title: \"Cámaras Registradas\",\r\n      value: String(totalCameras),\r\n      subtitle: \"Total en sistema\",\r\n      change: \"\",\r\n      trend: \"neutral\" as const,\r\n      icon: Camera,\r\n      color: \"text-primary\",\r\n      bgColor: \"bg-primary/10\",\r\n    },\r\n    {\r\n      title: \"Cámaras Activas\",\r\n      value: String(activeCameras),\r\n      subtitle: `${Math.max(0, totalCameras - activeCameras)} inactivas`,\r\n      change: totalCameras ? `${Math.round((activeCameras / totalCameras) * 100)}%` : \"0%\",\r\n      trend: \"neutral\" as const,\r\n      icon: Activity,\r\n      color: \"text-emerald-600\",\r\n      bgColor: \"bg-emerald-500/10\",\r\n    },\r\n    {\r\n      title: \"Incidentes Hoy\",\r\n      value: String(incidentsToday),\r\n      subtitle: \"Hoy\",\r\n      change: \"\",\r\n      trend: \"neutral\" as const,\r\n      icon: AlertTriangle,\r\n      color: \"text-amber-600\",\r\n      bgColor: \"bg-amber-500/10\",\r\n    },\r\n    {\r\n      title: \"Última Alerta\",\r\n      value: lastAlert ? \"Reciente\" : \"—\",\r\n      subtitle: lastAlert ? String(lastAlert.camera) : \"Sin alertas\",\r\n      change: \"\",\r\n      trend: \"neutral\" as const,\r\n      icon: Clock,\r\n      color: \"text-destructive\",\r\n      bgColor: \"bg-destructive/10\",\r\n    },\r\n  ];\r\n\r\n  const totalPages = Math.max(1, Math.ceil(recentActivity.length / pageSize));\r\n\r\n  const pageData = useMemo(() => {\r\n    const start = (page - 1) * pageSize;\r\n    return recentActivity.slice(start, start + pageSize);\r\n  }, [page, recentActivity]);\r\n\r\n  // Si cambian los datos y la página queda fuera, reajusta\r\n  useEffect(() => {\r\n    if (page > totalPages) setPage(totalPages);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [totalPages]);\r\n\r\n  const canPrev = page > 1;\r\n  const canNext = page < totalPages;\r\n\r\n  const goPrev = () => setPage((p) => Math.max(1, p - 1));\r\n  const goNext = () => setPage((p) => Math.min(totalPages, p + 1));\r\n\r\n  if (loading) {\r\n    return <div className=\"p-6 text-sm text-muted-foreground\">Cargando Dashboard...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full h-full flex flex-col gap-4 text-foreground animate-in fade-in duration-500 overflow-hidden\">\r\n      {/* 1. Header (más compacto) */}\r\n      <div className=\"shrink-0 flex flex-col md:flex-row md:items-center justify-between gap-3\">\r\n        <div className=\"space-y-0.5\">\r\n          <h1 className=\"text-xl md:text-2xl font-bold tracking-tight\">Panel de Control</h1>\r\n          <p className=\"text-muted-foreground text-xs md:text-sm\">\r\n            Monitoreo en tiempo real del sistema de detección inteligente\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-3 bg-card border border-border rounded-xl px-3 py-2 shadow-sm self-start md:self-center\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"h-2 w-2 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_8px_rgba(16,185,129,0.5)]\" />\r\n            <span className=\"text-[11px] font-bold uppercase tracking-wider\">Sistema Activo</span>\r\n          </div>\r\n          <div className=\"h-4 w-px bg-border\" />\r\n          <div className=\"text-right leading-tight\">\r\n            <p className=\"text-[10px] text-muted-foreground font-bold uppercase\">Última Sync</p>\r\n            <p className=\"text-[11px] font-bold\">Live</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 2. KPI (más compactas) */}\r\n      <div className=\"shrink-0 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4\">\r\n        {kpiData.map((kpi) => {\r\n          const Icon = kpi.icon;\r\n          return (\r\n            <Card key={kpi.title} className=\"bg-card border-border shadow-sm hover:shadow-md transition-all\">\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"flex items-start justify-between mb-3\">\r\n                  <div className={`${kpi.bgColor} p-2 rounded-lg`}>\r\n                    <Icon className={`h-4 w-4 ${kpi.color}`} />\r\n                  </div>\r\n\r\n                  {kpi.trend !== \"neutral\" && (\r\n                    <div\r\n                      className={`flex items-center gap-1 px-2 py-0.5 rounded-md text-[10px] font-bold border ${\r\n                        kpi.trend === \"up\"\r\n                          ? \"text-emerald-600 bg-emerald-50 border-emerald-100\"\r\n                          : \"text-destructive bg-destructive/5 border-destructive/10\"\r\n                      }`}\r\n                    >\r\n                      {kpi.trend === \"up\" ? <TrendingUp size={10} /> : <TrendingDown size={10} />}\r\n                      {kpi.change}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <p className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest mb-1\">\r\n                    {kpi.title}\r\n                  </p>\r\n                  <p className=\"text-2xl font-bold truncate\">{kpi.value}</p>\r\n                  <p className=\"text-[10px] text-muted-foreground mt-1 font-medium\">{kpi.subtitle}</p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* 3. Alerta Crítica (compacta) */}\r\n      <div className=\"shrink-0 w-full rounded-2xl border border-destructive/20 bg-gradient-to-br from-destructive/5 via-card to-destructive/5 shadow-sm\">\r\n        <div className=\"flex flex-col lg:flex-row lg:items-center gap-4 px-5 py-4\">\r\n          <div className=\"hidden lg:flex h-10 w-10 items-center justify-center rounded-2xl bg-destructive text-white shadow-md shadow-destructive/20\">\r\n            <AlertOctagon className=\"h-5 w-5\" />\r\n          </div>\r\n\r\n          <div className=\"flex-1 min-w-0\">\r\n            <div className=\"flex items-start gap-2\">\r\n              <AlertTriangle className=\"h-5 w-5 text-destructive lg:hidden mt-0.5 shrink-0\" />\r\n              <div className=\"min-w-0\">\r\n                <h3 className=\"text-base font-bold text-destructive leading-tight truncate\">\r\n                  {lastAlert ? `Última detección: ${lastAlert.weaponType}` : \"Sin alertas recientes\"}\r\n                </h3>\r\n                <p className=\"text-xs text-muted-foreground truncate\">\r\n                  {lastAlert\r\n                    ? \"Revisa evidencia y toma acción.\"\r\n                    : \"Cuando existan alertas, aquí verás la más reciente.\"}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mt-2 flex flex-wrap gap-2\">\r\n              <Badge className=\"bg-destructive hover:bg-destructive font-bold px-2.5 py-0.5 text-[11px] text-destructive-foreground\">\r\n                {lastAlert ? lastAlert.weaponType : \"—\"}\r\n              </Badge>\r\n              <Badge\r\n                variant=\"outline\"\r\n                className=\"bg-background border-destructive/20 text-destructive font-bold px-2.5 py-0.5 text-[11px]\"\r\n              >\r\n                {lastAlert ? `${Math.round(lastAlert.confidence * 100)}% Confianza` : \"—\"}\r\n              </Badge>\r\n            </div>\r\n\r\n            <div className=\"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-2\">\r\n              {[\r\n                { icon: Camera, label: \"Cámara\", val: lastAlert ? lastAlert.camera : \"—\" },\r\n                { icon: MapPin, label: \"Zona\", val: lastAlert ? (lastAlert.location || \"—\") : \"—\" },\r\n                { icon: Clock, label: \"Hora\", val: lastAlert ? lastAlert.timestamp : \"—\" },\r\n              ].map((item, idx) => (\r\n                <div\r\n                  key={idx}\r\n                  className=\"flex items-center gap-2 bg-muted/20 px-3 py-2 rounded-xl border border-border/40 overflow-hidden\"\r\n                >\r\n                  <item.icon size={14} className=\"text-destructive shrink-0\" />\r\n                  <div className=\"min-w-0\">\r\n                    <p className=\"text-[9px] font-bold text-muted-foreground uppercase tracking-tighter\">\r\n                      {item.label}\r\n                    </p>\r\n                    <p className=\"text-xs font-bold truncate\">{item.val}</p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex flex-row lg:flex-col gap-2 w-full lg:w-auto lg:shrink-0\">\r\n            <Button\r\n              size=\"sm\"\r\n              className=\"flex-1 lg:flex-none bg-destructive hover:bg-destructive/90 text-white font-bold h-9 px-4\"\r\n              disabled={!lastAlert}\r\n              onClick={() => {\r\n                if (!lastAlert) return;\r\n                console.log(\"Ver evidencia de alerta:\", lastAlert.id);\r\n              }}\r\n            >\r\n              Evidencia\r\n            </Button>\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n              className=\"flex-1 lg:flex-none h-9 px-4 font-bold bg-background\"\r\n              disabled={!lastAlert}\r\n              onClick={() => {\r\n                if (!lastAlert) return;\r\n                console.log(\"Ignorar alerta:\", lastAlert.id);\r\n              }}\r\n            >\r\n              Ignorar\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 4. Actividad Reciente + Distribución */}\r\n      <div className=\"flex-1 min-h-0 grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n        {/* Tabla */}\r\n        <Card className=\"lg:col-span-2 border-border shadow-sm flex flex-col min-h-0\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between border-b bg-muted/20 px-5 py-3 shrink-0\">\r\n            <div className=\"flex items-center gap-2 text-card-foreground\">\r\n              <Activity className=\"h-4 w-4 text-primary\" />\r\n              <CardTitle className=\"text-base font-bold\">Actividad Reciente</CardTitle>\r\n            </div>\r\n\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              className=\"text-xs font-bold text-primary hover:bg-primary/5\"\r\n              onClick={() => console.log(\"Ir a historial\")}\r\n            >\r\n              Historial <ChevronRight size={14} />\r\n            </Button>\r\n          </CardHeader>\r\n\r\n          <CardContent className=\"p-0 flex-1 min-h-0\">\r\n            <div className=\"h-full overflow-x-auto\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow className=\"bg-muted/30 hover:bg-muted/30 border-b\">\r\n                    <TableHead className=\"font-bold text-[10px] uppercase tracking-wider px-5\">Detección</TableHead>\r\n                    <th className=\"px-5 py-3 text-left font-bold text-[10px] uppercase tracking-wider text-muted-foreground\">\r\n                      IA\r\n                    </th>\r\n                    <TableHead className=\"font-bold text-[10px] uppercase tracking-wider px-5\">Cámara</TableHead>\r\n                    <TableHead className=\"font-bold text-[10px] uppercase tracking-wider px-5 text-center\">\r\n                      Nivel\r\n                    </TableHead>\r\n                    <TableHead className=\"text-right font-bold text-[10px] uppercase tracking-wider px-5\">\r\n                      Acción\r\n                    </TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n\r\n                <TableBody>\r\n                  {pageData.length === 0 ? (\r\n                    <TableRow>\r\n                      <TableCell className=\"px-5 py-6 text-sm text-muted-foreground\" colSpan={5}>\r\n                        No hay actividad reciente.\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ) : (\r\n                    pageData.map((incident) => (\r\n                      <TableRow\r\n                        key={incident.id}\r\n                        className=\"hover:bg-muted/10 transition-colors border-b last:border-0 group\"\r\n                      >\r\n                        <TableCell className=\"px-5 py-3\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <div\r\n                              className={`h-2 w-2 rounded-full shrink-0 ${\r\n                                incident.severity === \"critical\"\r\n                                  ? \"bg-destructive animate-pulse\"\r\n                                  : incident.severity === \"high\"\r\n                                  ? \"bg-orange-500\"\r\n                                  : incident.severity === \"medium\"\r\n                                  ? \"bg-amber-500\"\r\n                                  : \"bg-emerald-500\"\r\n                              }`}\r\n                            />\r\n                            <span className=\"text-sm font-bold truncate max-w-[160px]\">{incident.weaponType}</span>\r\n                          </div>\r\n                        </TableCell>\r\n\r\n                        <TableCell className=\"px-5 py-3\">\r\n                          <span className=\"text-xs font-mono font-bold\">{(incident.confidence * 100).toFixed(0)}%</span>\r\n                        </TableCell>\r\n\r\n                        <TableCell className=\"px-5 py-3\">\r\n                          <p className=\"text-xs font-bold truncate max-w-[180px]\">{incident.camera}</p>\r\n                          <p className=\"text-[10px] text-muted-foreground\">{incident.timestamp}</p>\r\n                        </TableCell>\r\n\r\n                        <TableCell className=\"px-5 py-3 text-center\">\r\n                          <Badge\r\n                            variant=\"outline\"\r\n                            className={`text-[9px] font-bold uppercase ${\r\n                              incident.severity === \"critical\"\r\n                                ? \"bg-destructive/10 text-destructive border-destructive/20\"\r\n                                : \"bg-muted text-foreground\"\r\n                            }`}\r\n                          >\r\n                            {incident.severity}\r\n                          </Badge>\r\n                        </TableCell>\r\n\r\n                        <TableCell className=\"px-5 py-3 text-right\">\r\n                          <Button\r\n                            size=\"sm\"\r\n                            variant=\"ghost\"\r\n                            className=\"h-8 w-8 p-0\"\r\n                            onClick={() => console.log(\"Ver detalle:\", incident.id)}\r\n                          >\r\n                            <Eye className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))\r\n                  )}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          </CardContent>\r\n\r\n          <div className=\"shrink-0 border-t px-5 py-2.5 bg-white flex items-center justify-between\">\r\n            <p className=\"text-xs text-muted-foreground font-medium\">\r\n              Mostrando{\" \"}\r\n              <span className=\"font-bold text-slate-900\">{recentActivity.length ? (page - 1) * pageSize + 1 : 0}</span>\r\n              {\" - \"}\r\n              <span className=\"font-bold text-slate-900\">{Math.min(page * pageSize, recentActivity.length)}</span> de{\" \"}\r\n              <span className=\"font-bold text-slate-900\">{recentActivity.length}</span>\r\n            </p>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              <Button variant=\"outline\" size=\"sm\" className=\"h-8\" onClick={goPrev} disabled={!canPrev}>\r\n                <ChevronLeft className=\"h-4 w-4 mr-1\" />\r\n                Anterior\r\n              </Button>\r\n\r\n              <div className=\"text-xs font-bold px-2\">\r\n                {page} / {totalPages}\r\n              </div>\r\n\r\n              <Button variant=\"outline\" size=\"sm\" className=\"h-8\" onClick={goNext} disabled={!canNext}>\r\n                Siguiente\r\n                <ChevronRight className=\"h-4 w-4 ml-1\" />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Distribución */}\r\n        <div className=\"min-h-0\">\r\n          <Card className=\"border-border shadow-sm bg-card text-card-foreground h-full flex flex-col\">\r\n            <CardHeader className=\"pb-2 border-b px-5 py-3 shrink-0\">\r\n              <CardTitle className=\"text-[11px] font-bold uppercase tracking-widest flex items-center gap-2\">\r\n                <ShieldCheck size={16} className=\"text-primary\" /> Distribución\r\n              </CardTitle>\r\n            </CardHeader>\r\n\r\n            <CardContent className=\"pt-4 px-5 space-y-3\">\r\n              {[\r\n                { label: \"Pistola\", val: 75, color: \"bg-primary\" },\r\n                { label: \"Rifle\", val: 15, color: \"bg-indigo-500\" },\r\n                { label: \"Cuchillo\", val: 10, color: \"bg-amber-500\" },\r\n              ].map((item, idx) => (\r\n                <div key={idx} className=\"space-y-1.5\">\r\n                  <div className=\"flex justify-between text-[10px] font-bold\">\r\n                    <span>{item.label}</span>\r\n                    <span className=\"text-muted-foreground\">{item.val}%</span>\r\n                  </div>\r\n                  <div className=\"w-full bg-muted h-1.5 rounded-full overflow-hidden\">\r\n                    <div className={`${item.color} h-full rounded-full transition-all`} style={{ width: `${item.val}%` }} />\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}