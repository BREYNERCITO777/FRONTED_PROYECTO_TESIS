{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROYECTO DE TESIS A\\xD1O 2026\\\\sistema-armas\\\\frontend\\\\src\\\\modules\\\\dashboard\\\\ui\\\\Dashboard.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"../../../shared/ui/card\";\nimport { Badge } from \"../../../shared/ui/badge\";\nimport { Button } from \"../../../shared/ui/button\";\nimport { Camera, Activity, AlertTriangle, Clock, TrendingUp, TrendingDown, Eye, MapPin, ChevronRight, ShieldCheck, AlertOctagon, ChevronLeft } from \"lucide-react\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"../../../shared/ui/table\";\nimport { listCameras } from \"../../../api/cameras\";\nimport { listAlerts } from \"../../../api/alerts\";\nimport { listIncidents } from \"../../../api/incidents\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Dashboard() {\n  _s();\n  // ✅ PAGINACIÓN\n  const pageSize = 10;\n  const [page, setPage] = useState(1);\n\n  // ✅ DATA BACKEND\n  const [loading, setLoading] = useState(true);\n  const [cameras, setCameras] = useState([]);\n  const [alerts, setAlerts] = useState([]);\n  const [incidents, setIncidents] = useState([]);\n  useEffect(() => {\n    (async () => {\n      try {\n        const [cams, als, inc] = await Promise.all([listCameras(), listAlerts(), listIncidents()]);\n        setCameras(Array.isArray(cams) ? cams : []);\n        setAlerts(Array.isArray(als) ? als : []);\n        setIncidents(Array.isArray(inc) ? inc : []);\n      } catch (e) {\n        var _e$response;\n        console.error(\"Dashboard API error:\", e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : _e$response.status, e === null || e === void 0 ? void 0 : e.message);\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, []);\n  const recentActivity = useMemo(() => {\n    const sorted = [...alerts].sort((a, b) => {\n      const ta = new Date(a.created_at || a.timestamp || 0).getTime();\n      const tb = new Date(b.created_at || b.timestamp || 0).getTime();\n      return tb - ta;\n    });\n    return sorted.map((a, idx) => {\n      var _ref, _a$confidence, _a$id;\n      const t = new Date(a.created_at || a.timestamp || Date.now());\n      const confidenceRaw = (_ref = (_a$confidence = a.confidence) !== null && _a$confidence !== void 0 ? _a$confidence : a.score) !== null && _ref !== void 0 ? _ref : 0;\n      const confidence = confidenceRaw > 1 ? confidenceRaw / 100 : confidenceRaw; // 0-100 o 0-1\n\n      const sev = a.severity || (confidence >= 0.9 ? \"critical\" : confidence >= 0.8 ? \"high\" : confidence >= 0.7 ? \"medium\" : \"low\");\n      return {\n        id: (_a$id = a.id) !== null && _a$id !== void 0 ? _a$id : idx,\n        weaponType: a.weapon_type || a.type || a.label || \"Detección\",\n        confidence: Math.max(0, Math.min(1, Number(confidence) || 0)),\n        camera: String(a.camera_code || a.camera_id || a.camera || \"CAM-?\"),\n        cameraName: a.camera_name || a.cameraName || \"\",\n        location: a.location || a.zone || \"\",\n        timestamp: Number.isFinite(t.getTime()) ? t.toLocaleTimeString() : \"\",\n        date: Number.isFinite(t.getTime()) ? t.toLocaleDateString() : \"\",\n        severity: sev\n      };\n    });\n  }, [alerts]);\n\n  // KPIs dinámicos\n  const totalCameras = cameras.length;\n  const activeCameras = cameras.filter(c => {\n    if (typeof c.is_active === \"boolean\") return c.is_active;\n    if (typeof c.active === \"boolean\") return c.active;\n    if (typeof c.status === \"string\") return c.status.toLowerCase() === \"active\";\n    return false;\n  }).length;\n  const today = new Date();\n  const isToday = d => d.getFullYear() === today.getFullYear() && d.getMonth() === today.getMonth() && d.getDate() === today.getDate();\n  const incidentsToday = incidents.filter(i => {\n    const t = new Date(i.created_at || i.timestamp || 0);\n    return Number.isFinite(t.getTime()) && isToday(t);\n  }).length;\n  const lastAlert = recentActivity[0];\n  const kpiData = [{\n    title: \"Cámaras Registradas\",\n    value: String(totalCameras),\n    subtitle: \"Total en sistema\",\n    change: \"\",\n    trend: \"neutral\",\n    icon: Camera,\n    color: \"text-primary\",\n    bgColor: \"bg-primary/10\"\n  }, {\n    title: \"Cámaras Activas\",\n    value: String(activeCameras),\n    subtitle: `${Math.max(0, totalCameras - activeCameras)} inactivas`,\n    change: totalCameras ? `${Math.round(activeCameras / totalCameras * 100)}%` : \"0%\",\n    trend: \"neutral\",\n    icon: Activity,\n    color: \"text-emerald-600\",\n    bgColor: \"bg-emerald-500/10\"\n  }, {\n    title: \"Incidentes Hoy\",\n    value: String(incidentsToday),\n    subtitle: \"Hoy\",\n    change: \"\",\n    trend: \"neutral\",\n    icon: AlertTriangle,\n    color: \"text-amber-600\",\n    bgColor: \"bg-amber-500/10\"\n  }, {\n    title: \"Última Alerta\",\n    value: lastAlert ? \"Reciente\" : \"—\",\n    subtitle: lastAlert ? String(lastAlert.camera) : \"Sin alertas\",\n    change: \"\",\n    trend: \"neutral\",\n    icon: Clock,\n    color: \"text-destructive\",\n    bgColor: \"bg-destructive/10\"\n  }];\n  const totalPages = Math.max(1, Math.ceil(recentActivity.length / pageSize));\n  const pageData = useMemo(() => {\n    const start = (page - 1) * pageSize;\n    return recentActivity.slice(start, start + pageSize);\n  }, [page, recentActivity]);\n\n  // Si cambian los datos y la página queda fuera, reajusta\n  useEffect(() => {\n    if (page > totalPages) setPage(totalPages);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [totalPages]);\n  const canPrev = page > 1;\n  const canNext = page < totalPages;\n  const goPrev = () => setPage(p => Math.max(1, p - 1));\n  const goNext = () => setPage(p => Math.min(totalPages, p + 1));\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 text-sm text-muted-foreground\",\n      children: \"Cargando Dashboard...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full h-full flex flex-col gap-4 text-foreground animate-in fade-in duration-500 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shrink-0 flex flex-col md:flex-row md:items-center justify-between gap-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-0.5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl md:text-2xl font-bold tracking-tight\",\n          children: \"Panel de Control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted-foreground text-xs md:text-sm\",\n          children: \"Monitoreo en tiempo real del sistema de detecci\\xF3n inteligente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3 bg-card border border-border rounded-xl px-3 py-2 shadow-sm self-start md:self-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-2 w-2 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_8px_rgba(16,185,129,0.5)]\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-[11px] font-bold uppercase tracking-wider\",\n            children: \"Sistema Activo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-4 w-px bg-border\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-right leading-tight\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-[10px] text-muted-foreground font-bold uppercase\",\n            children: \"\\xDAltima Sync\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-[11px] font-bold\",\n            children: \"Live\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shrink-0 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4\",\n      children: kpiData.map(kpi => {\n        const Icon = kpi.icon;\n        return /*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-card border-border shadow-sm hover:shadow-md transition-all\",\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            className: \"p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start justify-between mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `${kpi.bgColor} p-2 rounded-lg`,\n                children: /*#__PURE__*/_jsxDEV(Icon, {\n                  className: `h-4 w-4 ${kpi.color}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this), kpi.trend !== \"neutral\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `flex items-center gap-1 px-2 py-0.5 rounded-md text-[10px] font-bold border ${kpi.trend === \"up\" ? \"text-emerald-600 bg-emerald-50 border-emerald-100\" : \"text-destructive bg-destructive/5 border-destructive/10\"}`,\n                children: [kpi.trend === \"up\" ? /*#__PURE__*/_jsxDEV(TrendingUp, {\n                  size: 10\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(TrendingDown, {\n                  size: 10\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 72\n                }, this), kpi.change]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-[10px] font-bold text-muted-foreground uppercase tracking-widest mb-1\",\n                children: kpi.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-2xl font-bold truncate\",\n                children: kpi.value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-[10px] text-muted-foreground mt-1 font-medium\",\n                children: kpi.subtitle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 15\n          }, this)\n        }, kpi.title, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shrink-0 w-full rounded-2xl border border-destructive/20 bg-gradient-to-br from-destructive/5 via-card to-destructive/5 shadow-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col lg:flex-row lg:items-center gap-4 px-5 py-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hidden lg:flex h-10 w-10 items-center justify-center rounded-2xl bg-destructive text-white shadow-md shadow-destructive/20\",\n          children: /*#__PURE__*/_jsxDEV(AlertOctagon, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 min-w-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-start gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n              className: \"h-5 w-5 text-destructive lg:hidden mt-0.5 shrink-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"min-w-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-base font-bold text-destructive leading-tight truncate\",\n                children: lastAlert ? `Última detección: ${lastAlert.weaponType}` : \"Sin alertas recientes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-muted-foreground truncate\",\n                children: lastAlert ? \"Revisa evidencia y toma acción.\" : \"Cuando existan alertas, aquí verás la más reciente.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 flex flex-wrap gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Badge, {\n              className: \"bg-destructive hover:bg-destructive font-bold px-2.5 py-0.5 text-[11px] text-destructive-foreground\",\n              children: lastAlert ? lastAlert.weaponType : \"—\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Badge, {\n              variant: \"outline\",\n              className: \"bg-background border-destructive/20 text-destructive font-bold px-2.5 py-0.5 text-[11px]\",\n              children: lastAlert ? `${Math.round(lastAlert.confidence * 100)}% Confianza` : \"—\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-2\",\n            children: [{\n              icon: Camera,\n              label: \"Cámara\",\n              val: lastAlert ? lastAlert.camera : \"—\"\n            }, {\n              icon: MapPin,\n              label: \"Zona\",\n              val: lastAlert ? lastAlert.location || \"—\" : \"—\"\n            }, {\n              icon: Clock,\n              label: \"Hora\",\n              val: lastAlert ? lastAlert.timestamp : \"—\"\n            }].map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 bg-muted/20 px-3 py-2 rounded-xl border border-border/40 overflow-hidden\",\n              children: [/*#__PURE__*/_jsxDEV(item.icon, {\n                size: 14,\n                className: \"text-destructive shrink-0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-[9px] font-bold text-muted-foreground uppercase tracking-tighter\",\n                  children: item.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs font-bold truncate\",\n                  children: item.val\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 19\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-row lg:flex-col gap-2 w-full lg:w-auto lg:shrink-0\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            size: \"sm\",\n            className: \"flex-1 lg:flex-none bg-destructive hover:bg-destructive/90 text-white font-bold h-9 px-4\",\n            disabled: !lastAlert,\n            onClick: () => {\n              if (!lastAlert) return;\n              console.log(\"Ver evidencia de alerta:\", lastAlert.id);\n            },\n            children: \"Evidencia\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            size: \"sm\",\n            variant: \"outline\",\n            className: \"flex-1 lg:flex-none h-9 px-4 font-bold bg-background\",\n            disabled: !lastAlert,\n            onClick: () => {\n              if (!lastAlert) return;\n              console.log(\"Ignorar alerta:\", lastAlert.id);\n            },\n            children: \"Ignorar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 min-h-0 grid grid-cols-1 lg:grid-cols-3 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        className: \"lg:col-span-2 border-border shadow-sm flex flex-col min-h-0\",\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          className: \"flex flex-row items-center justify-between border-b bg-muted/20 px-5 py-3 shrink-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 text-card-foreground\",\n            children: [/*#__PURE__*/_jsxDEV(Activity, {\n              className: \"h-4 w-4 text-primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-base font-bold\",\n              children: \"Actividad Reciente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"ghost\",\n            size: \"sm\",\n            className: \"text-xs font-bold text-primary hover:bg-primary/5\",\n            onClick: () => console.log(\"Ir a historial\"),\n            children: [\"Historial \", /*#__PURE__*/_jsxDEV(ChevronRight, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          className: \"p-0 flex-1 min-h-0\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-full overflow-x-auto\",\n            children: /*#__PURE__*/_jsxDEV(Table, {\n              children: [/*#__PURE__*/_jsxDEV(TableHeader, {\n                children: /*#__PURE__*/_jsxDEV(TableRow, {\n                  className: \"bg-muted/30 hover:bg-muted/30 border-b\",\n                  children: [/*#__PURE__*/_jsxDEV(TableHead, {\n                    className: \"font-bold text-[10px] uppercase tracking-wider px-5\",\n                    children: \"Detecci\\xF3n\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 351,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"px-5 py-3 text-left font-bold text-[10px] uppercase tracking-wider text-muted-foreground\",\n                    children: \"IA\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 352,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TableHead, {\n                    className: \"font-bold text-[10px] uppercase tracking-wider px-5\",\n                    children: \"C\\xE1mara\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TableHead, {\n                    className: \"font-bold text-[10px] uppercase tracking-wider px-5 text-center\",\n                    children: \"Nivel\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 356,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TableHead, {\n                    className: \"text-right font-bold text-[10px] uppercase tracking-wider px-5\",\n                    children: \"Acci\\xF3n\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 359,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                children: pageData.length === 0 ? /*#__PURE__*/_jsxDEV(TableRow, {\n                  children: /*#__PURE__*/_jsxDEV(TableCell, {\n                    className: \"px-5 py-6 text-sm text-muted-foreground\",\n                    colSpan: 5,\n                    children: \"No hay actividad reciente.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 368,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 21\n                }, this) : pageData.map(incident => /*#__PURE__*/_jsxDEV(TableRow, {\n                  className: \"hover:bg-muted/10 transition-colors border-b last:border-0 group\",\n                  children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                    className: \"px-5 py-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: `h-2 w-2 rounded-full shrink-0 ${incident.severity === \"critical\" ? \"bg-destructive animate-pulse\" : incident.severity === \"high\" ? \"bg-orange-500\" : incident.severity === \"medium\" ? \"bg-amber-500\" : \"bg-emerald-500\"}`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 380,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-sm font-bold truncate max-w-[160px]\",\n                        children: incident.weaponType\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 391,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 379,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 378,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    className: \"px-5 py-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs font-mono font-bold\",\n                      children: [(incident.confidence * 100).toFixed(0), \"%\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 396,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 395,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    className: \"px-5 py-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs font-bold truncate max-w-[180px]\",\n                      children: incident.camera\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 400,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-[10px] text-muted-foreground\",\n                      children: incident.timestamp\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 401,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 399,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    className: \"px-5 py-3 text-center\",\n                    children: /*#__PURE__*/_jsxDEV(Badge, {\n                      variant: \"outline\",\n                      className: `text-[9px] font-bold uppercase ${incident.severity === \"critical\" ? \"bg-destructive/10 text-destructive border-destructive/20\" : \"bg-muted text-foreground\"}`,\n                      children: incident.severity\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 405,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 404,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    className: \"px-5 py-3 text-right\",\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      size: \"sm\",\n                      variant: \"ghost\",\n                      className: \"h-8 w-8 p-0\",\n                      onClick: () => console.log(\"Ver detalle:\", incident.id),\n                      children: /*#__PURE__*/_jsxDEV(Eye, {\n                        className: \"h-4 w-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 424,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 418,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 417,\n                    columnNumber: 25\n                  }, this)]\n                }, incident.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shrink-0 border-t px-5 py-2.5 bg-white flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-muted-foreground font-medium\",\n            children: [\"Mostrando\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-bold text-slate-900\",\n              children: recentActivity.length ? (page - 1) * pageSize + 1 : 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 15\n            }, this), \" - \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-bold text-slate-900\",\n              children: Math.min(page * pageSize, recentActivity.length)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 15\n            }, this), \" de\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-bold text-slate-900\",\n              children: recentActivity.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              size: \"sm\",\n              className: \"h-8\",\n              onClick: goPrev,\n              disabled: !canPrev,\n              children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n                className: \"h-4 w-4 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 17\n              }, this), \"Anterior\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs font-bold px-2\",\n              children: [page, \" / \", totalPages]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              size: \"sm\",\n              className: \"h-8\",\n              onClick: goNext,\n              disabled: !canNext,\n              children: [\"Siguiente\", /*#__PURE__*/_jsxDEV(ChevronRight, {\n                className: \"h-4 w-4 ml-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-0\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"border-border shadow-sm bg-card text-card-foreground h-full flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"pb-2 border-b px-5 py-3 shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-[11px] font-bold uppercase tracking-widest flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(ShieldCheck, {\n                size: 16,\n                className: \"text-primary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 17\n              }, this), \" Distribuci\\xF3n\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            className: \"pt-4 px-5 space-y-3\",\n            children: [{\n              label: \"Pistola\",\n              val: 75,\n              color: \"bg-primary\"\n            }, {\n              label: \"Rifle\",\n              val: 15,\n              color: \"bg-indigo-500\"\n            }, {\n              label: \"Cuchillo\",\n              val: 10,\n              color: \"bg-amber-500\"\n            }].map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-1.5\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-[10px] font-bold\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: item.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 479,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-muted-foreground\",\n                  children: [item.val, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full bg-muted h-1.5 rounded-full overflow-hidden\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `${item.color} h-full rounded-full transition-all`,\n                  style: {\n                    width: `${item.val}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 19\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"7E4djHnduVvClnfdh8hxXbD5C5A=\");\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","Card","CardContent","CardHeader","CardTitle","Badge","Button","Camera","Activity","AlertTriangle","Clock","TrendingUp","TrendingDown","Eye","MapPin","ChevronRight","ShieldCheck","AlertOctagon","ChevronLeft","Table","TableBody","TableCell","TableHead","TableHeader","TableRow","listCameras","listAlerts","listIncidents","jsxDEV","_jsxDEV","Dashboard","_s","pageSize","page","setPage","loading","setLoading","cameras","setCameras","alerts","setAlerts","incidents","setIncidents","cams","als","inc","Promise","all","Array","isArray","e","_e$response","console","error","response","status","message","recentActivity","sorted","sort","a","b","ta","Date","created_at","timestamp","getTime","tb","map","idx","_ref","_a$confidence","_a$id","t","now","confidenceRaw","confidence","score","sev","severity","id","weaponType","weapon_type","type","label","Math","max","min","Number","camera","String","camera_code","camera_id","cameraName","camera_name","location","zone","isFinite","toLocaleTimeString","date","toLocaleDateString","totalCameras","length","activeCameras","filter","c","is_active","active","toLowerCase","today","isToday","d","getFullYear","getMonth","getDate","incidentsToday","i","lastAlert","kpiData","title","value","subtitle","change","trend","icon","color","bgColor","round","totalPages","ceil","pageData","start","slice","canPrev","canNext","goPrev","p","goNext","className","children","fileName","_jsxFileName","lineNumber","columnNumber","kpi","Icon","size","variant","val","item","disabled","onClick","log","colSpan","incident","toFixed","style","width","_c","$RefreshReg$"],"sources":["D:/PROYECTO DE TESIS AÑO 2026/sistema-armas/frontend/src/modules/dashboard/ui/Dashboard.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"../../../shared/ui/card\";\r\nimport { Badge } from \"../../../shared/ui/badge\";\r\nimport { Button } from \"../../../shared/ui/button\";\r\nimport {\r\n  Camera,\r\n  Activity,\r\n  AlertTriangle,\r\n  Clock,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  Eye,\r\n  MapPin,\r\n  ChevronRight,\r\n  ShieldCheck,\r\n  AlertOctagon,\r\n  ChevronLeft,\r\n} from \"lucide-react\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"../../../shared/ui/table\";\r\n\r\nimport { listCameras } from \"../../../api/cameras\";\r\nimport { listAlerts } from \"../../../api/alerts\";\r\nimport { listIncidents } from \"../../../api/incidents\";\r\n\r\ntype UiRecentItem = {\r\n  id: string | number;\r\n  weaponType: string;\r\n  confidence: number; // 0..1\r\n  camera: string;\r\n  cameraName?: string;\r\n  location?: string;\r\n  timestamp: string;\r\n  date: string;\r\n  severity: \"low\" | \"medium\" | \"high\" | \"critical\";\r\n};\r\n\r\nexport function Dashboard() {\r\n  // ✅ PAGINACIÓN\r\n  const pageSize = 10;\r\n  const [page, setPage] = useState(1);\r\n\r\n  // ✅ DATA BACKEND\r\n  const [loading, setLoading] = useState(true);\r\n  const [cameras, setCameras] = useState<any[]>([]);\r\n  const [alerts, setAlerts] = useState<any[]>([]);\r\n  const [incidents, setIncidents] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const [cams, als, inc] = await Promise.all([listCameras(), listAlerts(), listIncidents()]);\r\n        setCameras(Array.isArray(cams) ? cams : []);\r\n        setAlerts(Array.isArray(als) ? als : []);\r\n        setIncidents(Array.isArray(inc) ? inc : []);\r\n      } catch (e: any) {\r\n        console.error(\"Dashboard API error:\", e?.response?.status, e?.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const recentActivity: UiRecentItem[] = useMemo(() => {\r\n    const sorted = [...alerts].sort((a, b) => {\r\n      const ta = new Date(a.created_at || a.timestamp || 0).getTime();\r\n      const tb = new Date(b.created_at || b.timestamp || 0).getTime();\r\n      return tb - ta;\r\n    });\r\n\r\n    return sorted.map((a: any, idx: number) => {\r\n      const t = new Date(a.created_at || a.timestamp || Date.now());\r\n      const confidenceRaw = a.confidence ?? a.score ?? 0;\r\n      const confidence = confidenceRaw > 1 ? confidenceRaw / 100 : confidenceRaw; // 0-100 o 0-1\r\n\r\n      const sev =\r\n        a.severity ||\r\n        (confidence >= 0.9 ? \"critical\" : confidence >= 0.8 ? \"high\" : confidence >= 0.7 ? \"medium\" : \"low\");\r\n\r\n      return {\r\n        id: a.id ?? idx,\r\n        weaponType: a.weapon_type || a.type || a.label || \"Detección\",\r\n        confidence: Math.max(0, Math.min(1, Number(confidence) || 0)),\r\n        camera: String(a.camera_code || a.camera_id || a.camera || \"CAM-?\"),\r\n        cameraName: a.camera_name || a.cameraName || \"\",\r\n        location: a.location || a.zone || \"\",\r\n        timestamp: Number.isFinite(t.getTime()) ? t.toLocaleTimeString() : \"\",\r\n        date: Number.isFinite(t.getTime()) ? t.toLocaleDateString() : \"\",\r\n        severity: sev,\r\n      };\r\n    });\r\n  }, [alerts]);\r\n\r\n  // KPIs dinámicos\r\n  const totalCameras = cameras.length;\r\n\r\n  const activeCameras = cameras.filter((c: any) => {\r\n    if (typeof c.is_active === \"boolean\") return c.is_active;\r\n    if (typeof c.active === \"boolean\") return c.active;\r\n    if (typeof c.status === \"string\") return c.status.toLowerCase() === \"active\";\r\n    return false;\r\n  }).length;\r\n\r\n  const today = new Date();\r\n  const isToday = (d: Date) =>\r\n    d.getFullYear() === today.getFullYear() && d.getMonth() === today.getMonth() && d.getDate() === today.getDate();\r\n\r\n  const incidentsToday = incidents.filter((i: any) => {\r\n    const t = new Date(i.created_at || i.timestamp || 0);\r\n    return Number.isFinite(t.getTime()) && isToday(t);\r\n  }).length;\r\n\r\n  const lastAlert = recentActivity[0];\r\n\r\n  const kpiData = [\r\n    {\r\n      title: \"Cámaras Registradas\",\r\n      value: String(totalCameras),\r\n      subtitle: \"Total en sistema\",\r\n      change: \"\",\r\n      trend: \"neutral\" as const,\r\n      icon: Camera,\r\n      color: \"text-primary\",\r\n      bgColor: \"bg-primary/10\",\r\n    },\r\n    {\r\n      title: \"Cámaras Activas\",\r\n      value: String(activeCameras),\r\n      subtitle: `${Math.max(0, totalCameras - activeCameras)} inactivas`,\r\n      change: totalCameras ? `${Math.round((activeCameras / totalCameras) * 100)}%` : \"0%\",\r\n      trend: \"neutral\" as const,\r\n      icon: Activity,\r\n      color: \"text-emerald-600\",\r\n      bgColor: \"bg-emerald-500/10\",\r\n    },\r\n    {\r\n      title: \"Incidentes Hoy\",\r\n      value: String(incidentsToday),\r\n      subtitle: \"Hoy\",\r\n      change: \"\",\r\n      trend: \"neutral\" as const,\r\n      icon: AlertTriangle,\r\n      color: \"text-amber-600\",\r\n      bgColor: \"bg-amber-500/10\",\r\n    },\r\n    {\r\n      title: \"Última Alerta\",\r\n      value: lastAlert ? \"Reciente\" : \"—\",\r\n      subtitle: lastAlert ? String(lastAlert.camera) : \"Sin alertas\",\r\n      change: \"\",\r\n      trend: \"neutral\" as const,\r\n      icon: Clock,\r\n      color: \"text-destructive\",\r\n      bgColor: \"bg-destructive/10\",\r\n    },\r\n  ];\r\n\r\n  const totalPages = Math.max(1, Math.ceil(recentActivity.length / pageSize));\r\n\r\n  const pageData = useMemo(() => {\r\n    const start = (page - 1) * pageSize;\r\n    return recentActivity.slice(start, start + pageSize);\r\n  }, [page, recentActivity]);\r\n\r\n  // Si cambian los datos y la página queda fuera, reajusta\r\n  useEffect(() => {\r\n    if (page > totalPages) setPage(totalPages);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [totalPages]);\r\n\r\n  const canPrev = page > 1;\r\n  const canNext = page < totalPages;\r\n\r\n  const goPrev = () => setPage((p) => Math.max(1, p - 1));\r\n  const goNext = () => setPage((p) => Math.min(totalPages, p + 1));\r\n\r\n  if (loading) {\r\n    return <div className=\"p-6 text-sm text-muted-foreground\">Cargando Dashboard...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full h-full flex flex-col gap-4 text-foreground animate-in fade-in duration-500 overflow-hidden\">\r\n      {/* 1. Header (más compacto) */}\r\n      <div className=\"shrink-0 flex flex-col md:flex-row md:items-center justify-between gap-3\">\r\n        <div className=\"space-y-0.5\">\r\n          <h1 className=\"text-xl md:text-2xl font-bold tracking-tight\">Panel de Control</h1>\r\n          <p className=\"text-muted-foreground text-xs md:text-sm\">\r\n            Monitoreo en tiempo real del sistema de detección inteligente\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-3 bg-card border border-border rounded-xl px-3 py-2 shadow-sm self-start md:self-center\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"h-2 w-2 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_8px_rgba(16,185,129,0.5)]\" />\r\n            <span className=\"text-[11px] font-bold uppercase tracking-wider\">Sistema Activo</span>\r\n          </div>\r\n          <div className=\"h-4 w-px bg-border\" />\r\n          <div className=\"text-right leading-tight\">\r\n            <p className=\"text-[10px] text-muted-foreground font-bold uppercase\">Última Sync</p>\r\n            <p className=\"text-[11px] font-bold\">Live</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 2. KPI (más compactas) */}\r\n      <div className=\"shrink-0 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4\">\r\n        {kpiData.map((kpi) => {\r\n          const Icon = kpi.icon;\r\n          return (\r\n            <Card key={kpi.title} className=\"bg-card border-border shadow-sm hover:shadow-md transition-all\">\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"flex items-start justify-between mb-3\">\r\n                  <div className={`${kpi.bgColor} p-2 rounded-lg`}>\r\n                    <Icon className={`h-4 w-4 ${kpi.color}`} />\r\n                  </div>\r\n\r\n                  {kpi.trend !== \"neutral\" && (\r\n                    <div\r\n                      className={`flex items-center gap-1 px-2 py-0.5 rounded-md text-[10px] font-bold border ${\r\n                        kpi.trend === \"up\"\r\n                          ? \"text-emerald-600 bg-emerald-50 border-emerald-100\"\r\n                          : \"text-destructive bg-destructive/5 border-destructive/10\"\r\n                      }`}\r\n                    >\r\n                      {kpi.trend === \"up\" ? <TrendingUp size={10} /> : <TrendingDown size={10} />}\r\n                      {kpi.change}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <p className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest mb-1\">\r\n                    {kpi.title}\r\n                  </p>\r\n                  <p className=\"text-2xl font-bold truncate\">{kpi.value}</p>\r\n                  <p className=\"text-[10px] text-muted-foreground mt-1 font-medium\">{kpi.subtitle}</p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* 3. Alerta Crítica (compacta) */}\r\n      <div className=\"shrink-0 w-full rounded-2xl border border-destructive/20 bg-gradient-to-br from-destructive/5 via-card to-destructive/5 shadow-sm\">\r\n        <div className=\"flex flex-col lg:flex-row lg:items-center gap-4 px-5 py-4\">\r\n          <div className=\"hidden lg:flex h-10 w-10 items-center justify-center rounded-2xl bg-destructive text-white shadow-md shadow-destructive/20\">\r\n            <AlertOctagon className=\"h-5 w-5\" />\r\n          </div>\r\n\r\n          <div className=\"flex-1 min-w-0\">\r\n            <div className=\"flex items-start gap-2\">\r\n              <AlertTriangle className=\"h-5 w-5 text-destructive lg:hidden mt-0.5 shrink-0\" />\r\n              <div className=\"min-w-0\">\r\n                <h3 className=\"text-base font-bold text-destructive leading-tight truncate\">\r\n                  {lastAlert ? `Última detección: ${lastAlert.weaponType}` : \"Sin alertas recientes\"}\r\n                </h3>\r\n                <p className=\"text-xs text-muted-foreground truncate\">\r\n                  {lastAlert\r\n                    ? \"Revisa evidencia y toma acción.\"\r\n                    : \"Cuando existan alertas, aquí verás la más reciente.\"}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mt-2 flex flex-wrap gap-2\">\r\n              <Badge className=\"bg-destructive hover:bg-destructive font-bold px-2.5 py-0.5 text-[11px] text-destructive-foreground\">\r\n                {lastAlert ? lastAlert.weaponType : \"—\"}\r\n              </Badge>\r\n              <Badge\r\n                variant=\"outline\"\r\n                className=\"bg-background border-destructive/20 text-destructive font-bold px-2.5 py-0.5 text-[11px]\"\r\n              >\r\n                {lastAlert ? `${Math.round(lastAlert.confidence * 100)}% Confianza` : \"—\"}\r\n              </Badge>\r\n            </div>\r\n\r\n            <div className=\"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-2\">\r\n              {[\r\n                { icon: Camera, label: \"Cámara\", val: lastAlert ? lastAlert.camera : \"—\" },\r\n                { icon: MapPin, label: \"Zona\", val: lastAlert ? (lastAlert.location || \"—\") : \"—\" },\r\n                { icon: Clock, label: \"Hora\", val: lastAlert ? lastAlert.timestamp : \"—\" },\r\n              ].map((item, idx) => (\r\n                <div\r\n                  key={idx}\r\n                  className=\"flex items-center gap-2 bg-muted/20 px-3 py-2 rounded-xl border border-border/40 overflow-hidden\"\r\n                >\r\n                  <item.icon size={14} className=\"text-destructive shrink-0\" />\r\n                  <div className=\"min-w-0\">\r\n                    <p className=\"text-[9px] font-bold text-muted-foreground uppercase tracking-tighter\">\r\n                      {item.label}\r\n                    </p>\r\n                    <p className=\"text-xs font-bold truncate\">{item.val}</p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex flex-row lg:flex-col gap-2 w-full lg:w-auto lg:shrink-0\">\r\n            <Button\r\n              size=\"sm\"\r\n              className=\"flex-1 lg:flex-none bg-destructive hover:bg-destructive/90 text-white font-bold h-9 px-4\"\r\n              disabled={!lastAlert}\r\n              onClick={() => {\r\n                if (!lastAlert) return;\r\n                console.log(\"Ver evidencia de alerta:\", lastAlert.id);\r\n              }}\r\n            >\r\n              Evidencia\r\n            </Button>\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n              className=\"flex-1 lg:flex-none h-9 px-4 font-bold bg-background\"\r\n              disabled={!lastAlert}\r\n              onClick={() => {\r\n                if (!lastAlert) return;\r\n                console.log(\"Ignorar alerta:\", lastAlert.id);\r\n              }}\r\n            >\r\n              Ignorar\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 4. Actividad Reciente + Distribución */}\r\n      <div className=\"flex-1 min-h-0 grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n        {/* Tabla */}\r\n        <Card className=\"lg:col-span-2 border-border shadow-sm flex flex-col min-h-0\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between border-b bg-muted/20 px-5 py-3 shrink-0\">\r\n            <div className=\"flex items-center gap-2 text-card-foreground\">\r\n              <Activity className=\"h-4 w-4 text-primary\" />\r\n              <CardTitle className=\"text-base font-bold\">Actividad Reciente</CardTitle>\r\n            </div>\r\n\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              className=\"text-xs font-bold text-primary hover:bg-primary/5\"\r\n              onClick={() => console.log(\"Ir a historial\")}\r\n            >\r\n              Historial <ChevronRight size={14} />\r\n            </Button>\r\n          </CardHeader>\r\n\r\n          <CardContent className=\"p-0 flex-1 min-h-0\">\r\n            <div className=\"h-full overflow-x-auto\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow className=\"bg-muted/30 hover:bg-muted/30 border-b\">\r\n                    <TableHead className=\"font-bold text-[10px] uppercase tracking-wider px-5\">Detección</TableHead>\r\n                    <th className=\"px-5 py-3 text-left font-bold text-[10px] uppercase tracking-wider text-muted-foreground\">\r\n                      IA\r\n                    </th>\r\n                    <TableHead className=\"font-bold text-[10px] uppercase tracking-wider px-5\">Cámara</TableHead>\r\n                    <TableHead className=\"font-bold text-[10px] uppercase tracking-wider px-5 text-center\">\r\n                      Nivel\r\n                    </TableHead>\r\n                    <TableHead className=\"text-right font-bold text-[10px] uppercase tracking-wider px-5\">\r\n                      Acción\r\n                    </TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n\r\n                <TableBody>\r\n                  {pageData.length === 0 ? (\r\n                    <TableRow>\r\n                      <TableCell className=\"px-5 py-6 text-sm text-muted-foreground\" colSpan={5}>\r\n                        No hay actividad reciente.\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ) : (\r\n                    pageData.map((incident) => (\r\n                      <TableRow\r\n                        key={incident.id}\r\n                        className=\"hover:bg-muted/10 transition-colors border-b last:border-0 group\"\r\n                      >\r\n                        <TableCell className=\"px-5 py-3\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <div\r\n                              className={`h-2 w-2 rounded-full shrink-0 ${\r\n                                incident.severity === \"critical\"\r\n                                  ? \"bg-destructive animate-pulse\"\r\n                                  : incident.severity === \"high\"\r\n                                  ? \"bg-orange-500\"\r\n                                  : incident.severity === \"medium\"\r\n                                  ? \"bg-amber-500\"\r\n                                  : \"bg-emerald-500\"\r\n                              }`}\r\n                            />\r\n                            <span className=\"text-sm font-bold truncate max-w-[160px]\">{incident.weaponType}</span>\r\n                          </div>\r\n                        </TableCell>\r\n\r\n                        <TableCell className=\"px-5 py-3\">\r\n                          <span className=\"text-xs font-mono font-bold\">{(incident.confidence * 100).toFixed(0)}%</span>\r\n                        </TableCell>\r\n\r\n                        <TableCell className=\"px-5 py-3\">\r\n                          <p className=\"text-xs font-bold truncate max-w-[180px]\">{incident.camera}</p>\r\n                          <p className=\"text-[10px] text-muted-foreground\">{incident.timestamp}</p>\r\n                        </TableCell>\r\n\r\n                        <TableCell className=\"px-5 py-3 text-center\">\r\n                          <Badge\r\n                            variant=\"outline\"\r\n                            className={`text-[9px] font-bold uppercase ${\r\n                              incident.severity === \"critical\"\r\n                                ? \"bg-destructive/10 text-destructive border-destructive/20\"\r\n                                : \"bg-muted text-foreground\"\r\n                            }`}\r\n                          >\r\n                            {incident.severity}\r\n                          </Badge>\r\n                        </TableCell>\r\n\r\n                        <TableCell className=\"px-5 py-3 text-right\">\r\n                          <Button\r\n                            size=\"sm\"\r\n                            variant=\"ghost\"\r\n                            className=\"h-8 w-8 p-0\"\r\n                            onClick={() => console.log(\"Ver detalle:\", incident.id)}\r\n                          >\r\n                            <Eye className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))\r\n                  )}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          </CardContent>\r\n\r\n          <div className=\"shrink-0 border-t px-5 py-2.5 bg-white flex items-center justify-between\">\r\n            <p className=\"text-xs text-muted-foreground font-medium\">\r\n              Mostrando{\" \"}\r\n              <span className=\"font-bold text-slate-900\">{recentActivity.length ? (page - 1) * pageSize + 1 : 0}</span>\r\n              {\" - \"}\r\n              <span className=\"font-bold text-slate-900\">{Math.min(page * pageSize, recentActivity.length)}</span> de{\" \"}\r\n              <span className=\"font-bold text-slate-900\">{recentActivity.length}</span>\r\n            </p>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              <Button variant=\"outline\" size=\"sm\" className=\"h-8\" onClick={goPrev} disabled={!canPrev}>\r\n                <ChevronLeft className=\"h-4 w-4 mr-1\" />\r\n                Anterior\r\n              </Button>\r\n\r\n              <div className=\"text-xs font-bold px-2\">\r\n                {page} / {totalPages}\r\n              </div>\r\n\r\n              <Button variant=\"outline\" size=\"sm\" className=\"h-8\" onClick={goNext} disabled={!canNext}>\r\n                Siguiente\r\n                <ChevronRight className=\"h-4 w-4 ml-1\" />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Distribución */}\r\n        <div className=\"min-h-0\">\r\n          <Card className=\"border-border shadow-sm bg-card text-card-foreground h-full flex flex-col\">\r\n            <CardHeader className=\"pb-2 border-b px-5 py-3 shrink-0\">\r\n              <CardTitle className=\"text-[11px] font-bold uppercase tracking-widest flex items-center gap-2\">\r\n                <ShieldCheck size={16} className=\"text-primary\" /> Distribución\r\n              </CardTitle>\r\n            </CardHeader>\r\n\r\n            <CardContent className=\"pt-4 px-5 space-y-3\">\r\n              {[\r\n                { label: \"Pistola\", val: 75, color: \"bg-primary\" },\r\n                { label: \"Rifle\", val: 15, color: \"bg-indigo-500\" },\r\n                { label: \"Cuchillo\", val: 10, color: \"bg-amber-500\" },\r\n              ].map((item, idx) => (\r\n                <div key={idx} className=\"space-y-1.5\">\r\n                  <div className=\"flex justify-between text-[10px] font-bold\">\r\n                    <span>{item.label}</span>\r\n                    <span className=\"text-muted-foreground\">{item.val}%</span>\r\n                  </div>\r\n                  <div className=\"w-full bg-muted h-1.5 rounded-full overflow-hidden\">\r\n                    <div className={`${item.color} h-full rounded-full transition-all`} style={{ width: `${item.val}%` }} />\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}