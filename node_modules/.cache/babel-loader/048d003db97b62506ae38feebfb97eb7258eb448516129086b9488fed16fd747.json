{"ast":null,"code":"import _objectSpread from\"D:/PROYECTO DE TESIS A\\xD1O 2026/sistema-armas/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useMemo,useState,useEffect,useCallback}from\"react\";import{Card,CardContent,CardHeader,CardTitle}from\"../../../shared/ui/card\";import{Button}from\"../../../shared/ui/button\";import{Badge}from\"../../../shared/ui/badge\";import{Input}from\"../../../shared/ui/input\";import{Label}from\"../../../shared/ui/label\";import{Switch}from\"../../../shared/ui/switch\";import{Dialog,DialogContent,DialogHeader,DialogTitle,DialogTrigger}from\"../../../shared/ui/dialog\";import{Table,TableBody,TableCell,TableHead,TableHeader,TableRow}from\"../../../shared/ui/table\";import{Play,Square,Pencil,Trash2,Plus,Video,Activity,Server,ChevronLeft,ChevronRight,Eye,RefreshCw,Maximize2,Minimize2,X,AlertTriangle}from\"lucide-react\";import{toast}from\"sonner\";import{listCameras,createCamera,updateCamera,deleteCamera,startCamera,stopCamera}from\"../../../api/cameras\";import{useAuth}from\"../../../context/auth-context\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE=process.env.REACT_APP_API_BASE||\"http://localhost:8000/api/v1\";function normalizeCamera(raw){var _ref,_raw$_id,_raw$name,_raw$rtsp_url,_raw$fps_target,_raw$infer_every_n_fr,_raw$status;const id=String((_ref=(_raw$_id=raw._id)!==null&&_raw$_id!==void 0?_raw$_id:raw.id)!==null&&_ref!==void 0?_ref:\"\");const name=String((_raw$name=raw.name)!==null&&_raw$name!==void 0?_raw$name:\"C√°mara\");const rtsp_url=String((_raw$rtsp_url=raw.rtsp_url)!==null&&_raw$rtsp_url!==void 0?_raw$rtsp_url:\"0\");const enabled=raw.enabled===undefined?true:Boolean(raw.enabled);const fps_target=Number((_raw$fps_target=raw.fps_target)!==null&&_raw$fps_target!==void 0?_raw$fps_target:30)||30;const infer_every_n_frames=Number((_raw$infer_every_n_fr=raw.infer_every_n_frames)!==null&&_raw$infer_every_n_fr!==void 0?_raw$infer_every_n_fr:5)||5;const rawStatus=String((_raw$status=raw.status)!==null&&_raw$status!==void 0?_raw$status:\"\").toUpperCase();const status=rawStatus===\"RUNNING\"||rawStatus===\"STOPPED\"?rawStatus:enabled?\"RUNNING\":\"STOPPED\";return{id,name,rtsp_url,enabled,fps_target,infer_every_n_frames,status};}export function Cameras(){var _user$role,_activeVideoCamera$na;const{user,token}=useAuth();const isAdmin=(user===null||user===void 0?void 0:user.role)===\"admin\";const[loading,setLoading]=useState(true);const[cameras,setCameras]=useState([]);const[isDialogOpen,setIsDialogOpen]=useState(false);const[isVideoModalOpen,setIsVideoModalOpen]=useState(false);const[activeVideoCamera,setActiveVideoCamera]=useState(null);const[editingCamera,setEditingCamera]=useState(null);const[formData,setFormData]=useState({name:\"\",rtsp_url:\"\",enabled:true,fps_target:30,infer_every_n_frames:5});// ------- STREAM -------\nconst[streamKey,setStreamKey]=useState(Date.now());const[streamError,setStreamError]=useState(null);const[isFullscreen,setIsFullscreen]=useState(false);const getStreamUrl=useCallback(cameraId=>{const base=\"\".concat(API_BASE,\"/inference/stream/\").concat(cameraId);const qs=[];if(token)qs.push(\"token=\".concat(encodeURIComponent(token)));qs.push(\"t=\".concat(streamKey));// cache-bust\nreturn\"\".concat(base,\"?\").concat(qs.join(\"&\"));},[token,streamKey]);async function refresh(){try{const data=await listCameras();const normalized=Array.isArray(data)?data.map(normalizeCamera):[];setCameras(normalized);}catch(e){var _e$response;console.error(\"listCameras error:\",e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:_e$response.status,e===null||e===void 0?void 0:e.message);toast.error(\"No se pudieron cargar las c√°maras\");}}useEffect(()=>{(async()=>{setLoading(true);await refresh();setLoading(false);})();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// PAGINACI√ìN\nconst pageSize=5;const[page,setPage]=useState(1);const totalPages=Math.max(1,Math.ceil(cameras.length/pageSize));useEffect(()=>setPage(p=>Math.min(p,totalPages)),[totalPages]);const pageData=useMemo(()=>{const start=(page-1)*pageSize;return cameras.slice(start,start+pageSize);},[cameras,page]);const canPrev=page>1;const canNext=page<totalPages;const goPrev=()=>setPage(p=>Math.max(1,p-1));const goNext=()=>setPage(p=>Math.min(totalPages,p+1));const handleStartStop=async(id,currentStatus)=>{if(!isAdmin){toast.error(\"No tienes permisos para iniciar/detener c√°maras\");return;}const nextStatus=currentStatus===\"RUNNING\"?\"STOPPED\":\"RUNNING\";setCameras(prev=>prev.map(cam=>cam.id===id?_objectSpread(_objectSpread({},cam),{},{status:nextStatus}):cam));try{if(currentStatus===\"RUNNING\"){await stopCamera(id);toast.success(\"üî¥ Detenida\");}else{await startCamera(id);toast.success(\"üü¢ Iniciada\");}}catch(e){var _e$response2;console.error(\"start/stop error:\",e===null||e===void 0?void 0:(_e$response2=e.response)===null||_e$response2===void 0?void 0:_e$response2.status,e===null||e===void 0?void 0:e.message);toast.error(\"No se pudo cambiar el estado\");setCameras(prev=>prev.map(cam=>cam.id===id?_objectSpread(_objectSpread({},cam),{},{status:currentStatus}):cam));}};const handleDelete=async(id,name)=>{if(!isAdmin){toast.error(\"No tienes permisos para eliminar c√°maras\");return;}const prev=cameras;setCameras(p=>p.filter(c=>c.id!==id));try{await deleteCamera(id);toast.success(\"C\\xE1mara \\\"\".concat(name,\"\\\" eliminada\"));}catch(e){var _e$response3;console.error(\"delete error:\",e===null||e===void 0?void 0:(_e$response3=e.response)===null||_e$response3===void 0?void 0:_e$response3.status,e===null||e===void 0?void 0:e.message);toast.error(\"No se pudo eliminar la c√°mara\");setCameras(prev);}};const handleEdit=camera=>{if(!isAdmin){toast.error(\"No tienes permisos para editar c√°maras\");return;}setEditingCamera(camera);setFormData({name:camera.name,rtsp_url:camera.rtsp_url,enabled:camera.enabled,fps_target:camera.fps_target,infer_every_n_frames:camera.infer_every_n_frames});setIsDialogOpen(true);};const handleSubmit=async e=>{e.preventDefault();if(!isAdmin){toast.error(\"No tienes permisos para guardar c√°maras\");return;}try{if(editingCamera){await updateCamera(editingCamera.id,formData);toast.success(\"C√°mara actualizada\");}else{await createCamera(formData);toast.success(\"C√°mara creada\");}setIsDialogOpen(false);setEditingCamera(null);await refresh();}catch(e){var _e$response4;console.error(\"save camera error:\",e===null||e===void 0?void 0:(_e$response4=e.response)===null||_e$response4===void 0?void 0:_e$response4.status,e===null||e===void 0?void 0:e.message);toast.error(\"No se pudo guardar la c√°mara\");}};const runningCameras=cameras.filter(c=>c.status===\"RUNNING\").length;const stoppedCameras=cameras.filter(c=>c.status===\"STOPPED\").length;// --- OPEN VIDEO MODAL ---\nconst openVideo=camera=>{setActiveVideoCamera(camera);setStreamError(null);setStreamKey(Date.now());// nuevo stream\nsetIsFullscreen(false);setIsVideoModalOpen(true);};const closeVideo=()=>{// forzar que se ‚Äúcorte‚Äù el stream del <img>\nsetStreamKey(Date.now());setIsVideoModalOpen(false);setActiveVideoCamera(null);setStreamError(null);setIsFullscreen(false);};const reloadStream=()=>{setStreamError(null);setStreamKey(Date.now());};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-slate-900\",children:\"Gesti\\xF3n de C\\xE1maras\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-600\",children:\"Monitoreo y administraci\\xF3n de dispositivos\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-slate-500 mt-1\",children:[\"Rol actual: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:(_user$role=user===null||user===void 0?void 0:user.role)!==null&&_user$role!==void 0?_user$role:\"‚Äî\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:()=>refresh(),children:\"Refrescar\"}),/*#__PURE__*/_jsxs(Dialog,{open:isDialogOpen,onOpenChange:setIsDialogOpen,children:[/*#__PURE__*/_jsx(DialogTrigger,{asChild:true,children:/*#__PURE__*/_jsxs(Button,{disabled:!isAdmin,title:!isAdmin?\"Solo admin puede crear c√°maras\":undefined,onClick:()=>{if(!isAdmin)return;setEditingCamera(null);setFormData({name:\"\",rtsp_url:\"\",enabled:true,fps_target:30,infer_every_n_frames:5});},children:[/*#__PURE__*/_jsx(Plus,{className:\"h-5 w-5 mr-2\"}),\" Nueva C\\xE1mara\"]})}),/*#__PURE__*/_jsxs(DialogContent,{className:\"sm:max-w-[500px]\",children:[/*#__PURE__*/_jsx(DialogHeader,{children:/*#__PURE__*/_jsxs(DialogTitle,{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Video,{className:\"h-5 w-5 text-blue-600\"}),editingCamera?\"Editar C√°mara\":\"Nueva C√°mara\"]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4 pt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{children:\"Nombre\"}),/*#__PURE__*/_jsx(Input,{value:formData.name,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value})),placeholder:\"Ej: Pasillo A\",required:true,disabled:!isAdmin})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{children:\"URL RTSP / Fuente\"}),/*#__PURE__*/_jsx(Input,{value:formData.rtsp_url,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{rtsp_url:e.target.value})),placeholder:\"0 (local) o rtsp://...\",required:true,disabled:!isAdmin}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[11px] text-slate-500\",children:\"Nota: en servidor (Render) NO funciona webcam \\\"0\\\". Usa RTSP/IP cam.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-slate-50 rounded-lg border\",children:[/*#__PURE__*/_jsx(Label,{children:\"Habilitar detecci\\xF3n\"}),/*#__PURE__*/_jsx(Switch,{checked:formData.enabled,onCheckedChange:checked=>setFormData(_objectSpread(_objectSpread({},formData),{},{enabled:checked})),disabled:!isAdmin})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{children:\"FPS objetivo\"}),/*#__PURE__*/_jsx(Input,{type:\"number\",min:1,max:60,value:formData.fps_target,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{fps_target:Number(e.target.value)})),disabled:!isAdmin})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Label,{children:\"Infer cada N frames\"}),/*#__PURE__*/_jsx(Input,{type:\"number\",min:1,max:60,value:formData.infer_every_n_frames,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{infer_every_n_frames:Number(e.target.value)})),disabled:!isAdmin})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-2\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"w-full\",disabled:!isAdmin,children:editingCamera?\"Actualizar\":\"Crear\"})})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-sm border-l-4 border-l-emerald-500\",children:/*#__PURE__*/_jsx(CardContent,{className:\"pt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-bold text-slate-500\",children:\"ACTIVAS\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold\",children:runningCameras})]}),/*#__PURE__*/_jsx(Play,{className:\"h-5 w-5 text-emerald-500\"})]})})}),/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-sm border-l-4 border-l-slate-400\",children:/*#__PURE__*/_jsx(CardContent,{className:\"pt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-bold text-slate-500\",children:\"DETENIDAS\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold\",children:stoppedCameras})]}),/*#__PURE__*/_jsx(Square,{className:\"h-5 w-5 text-slate-400\"})]})})}),/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-sm border-l-4 border-l-blue-500\",children:/*#__PURE__*/_jsx(CardContent,{className:\"pt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-bold text-slate-500\",children:\"ACTIVIDAD\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold\",children:[cameras.length?Math.round(runningCameras/cameras.length*100):0,\"%\"]})]}),/*#__PURE__*/_jsx(Activity,{className:\"h-5 w-5 text-blue-500\"})]})})})]}),/*#__PURE__*/_jsxs(Card,{className:\"border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(CardHeader,{className:\"bg-slate-50/50 border-b\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Server,{className:\"h-4 w-4 text-slate-500\"}),/*#__PURE__*/_jsx(CardTitle,{className:\"text-sm\",children:\"Listado de Dispositivos\"})]})}),/*#__PURE__*/_jsx(CardContent,{className:\"p-0\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"p-6 text-sm text-slate-500\",children:\"Cargando c\\xE1maras...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHeader,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableHead,{children:\"ID\"}),/*#__PURE__*/_jsx(TableHead,{children:\"C\\xE1mara\"}),/*#__PURE__*/_jsx(TableHead,{className:\"text-center\",children:\"Estado\"}),/*#__PURE__*/_jsx(TableHead,{className:\"text-right\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:pageData.map(camera=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{className:\"font-mono text-xs\",children:camera.id}),/*#__PURE__*/_jsx(TableCell,{className:\"font-semibold\",children:camera.name}),/*#__PURE__*/_jsx(TableCell,{className:\"text-center\",children:/*#__PURE__*/_jsx(Badge,{className:camera.status===\"RUNNING\"?\"bg-emerald-100 text-emerald-700\":\"bg-slate-100 text-slate-600\",children:camera.status})}),/*#__PURE__*/_jsxs(TableCell,{className:\"text-right flex justify-end gap-2\",children:[/*#__PURE__*/_jsxs(Button,{size:\"sm\",onClick:()=>openVideo(camera),disabled:camera.status===\"STOPPED\",title:camera.status===\"STOPPED\"?\"Inicia la c√°mara para ver stream\":undefined,children:[/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4 mr-1\"}),\" Ver\"]}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>handleStartStop(camera.id,camera.status),disabled:!isAdmin,title:!isAdmin?\"Solo admin puede iniciar/detener\":undefined,children:camera.status===\"RUNNING\"?/*#__PURE__*/_jsx(Square,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(Play,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:()=>handleEdit(camera),disabled:!isAdmin,title:!isAdmin?\"Solo admin puede editar\":undefined,children:/*#__PURE__*/_jsx(Pencil,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",className:\"text-rose-600\",onClick:()=>handleDelete(camera.id,camera.name),disabled:!isAdmin,title:!isAdmin?\"Solo admin puede eliminar\":undefined,children:/*#__PURE__*/_jsx(Trash2,{className:\"h-4 w-4\"})})]})]},camera.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-t flex items-center justify-between bg-slate-50/30\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-slate-500\",children:[\"P\\xE1gina \",page,\" de \",totalPages]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"sm\",onClick:goPrev,disabled:!canPrev,children:/*#__PURE__*/_jsx(ChevronLeft,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"sm\",onClick:goNext,disabled:!canNext,children:/*#__PURE__*/_jsx(ChevronRight,{className:\"h-4 w-4\"})})]})]})]})})]}),/*#__PURE__*/_jsx(Dialog,{open:isVideoModalOpen,onOpenChange:v=>v?setIsVideoModalOpen(true):closeVideo(),children:/*#__PURE__*/_jsxs(DialogContent,{className:isFullscreen?\"p-0 w-[100vw] h-[100vh] max-w-none rounded-none bg-slate-950 border-slate-900\":\"sm:max-w-5xl bg-slate-950 border-slate-800\",children:[/*#__PURE__*/_jsx(DialogHeader,{className:isFullscreen?\"px-4 pt-4\":\"\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between gap-2\",children:[/*#__PURE__*/_jsxs(DialogTitle,{className:\"text-slate-100 uppercase text-xs tracking-widest\",children:[\"En Vivo: \",(_activeVideoCamera$na=activeVideoCamera===null||activeVideoCamera===void 0?void 0:activeVideoCamera.name)!==null&&_activeVideoCamera$na!==void 0?_activeVideoCamera$na:\"‚Äî\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(Button,{size:\"sm\",variant:\"outline\",className:\"border-slate-700 text-slate-100 hover:bg-slate-900\",onClick:reloadStream,children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"h-4 w-4 mr-2\"}),\"Recargar\"]}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",className:\"border-slate-700 text-slate-100 hover:bg-slate-900\",onClick:()=>setIsFullscreen(s=>!s),children:isFullscreen?/*#__PURE__*/_jsx(Minimize2,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(Maximize2,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",className:\"border-slate-700 text-slate-100 hover:bg-slate-900\",onClick:closeVideo,children:/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:isFullscreen?\"px-4 pb-4\":\"\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative aspect-video bg-black rounded-xl overflow-hidden border border-slate-800\",children:[streamError&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center bg-black/70 z-10 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-lg text-center text-slate-100 space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-5 w-5 text-amber-400\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:\"No se pudo cargar el stream\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-300 break-words\",children:streamError}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 pt-2\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline\",className:\"border-slate-700 text-slate-100 hover:bg-slate-900\",onClick:reloadStream,children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"h-4 w-4 mr-2\"}),\"Reintentar\"]}),/*#__PURE__*/_jsx(Button,{variant:\"outline\",className:\"border-slate-700 text-slate-100 hover:bg-slate-900\",onClick:closeVideo,children:\"Cerrar\"})]})]})}),activeVideoCamera&&/*#__PURE__*/_jsx(\"img\",{// fuerza reset\nsrc:getStreamUrl(activeVideoCamera.id),alt:\"Live\",className:\"w-full h-full object-contain bg-black\",onError:()=>{const url=getStreamUrl(activeVideoCamera.id);setStreamError(\"Error cargando MJPEG. Revisa: token v\\xE1lido, c\\xE1mara RUNNING, y que /inference/stream acepte ?token=. URL: \".concat(url));}},streamKey)]}),activeVideoCamera&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-xs text-slate-300 break-all\",children:[\"Stream URL: \",getStreamUrl(activeVideoCamera.id)]})]})]})})]});}","map":{"version":3,"names":["React","useMemo","useState","useEffect","useCallback","Card","CardContent","CardHeader","CardTitle","Button","Badge","Input","Label","Switch","Dialog","DialogContent","DialogHeader","DialogTitle","DialogTrigger","Table","TableBody","TableCell","TableHead","TableHeader","TableRow","Play","Square","Pencil","Trash2","Plus","Video","Activity","Server","ChevronLeft","ChevronRight","Eye","RefreshCw","Maximize2","Minimize2","X","AlertTriangle","toast","listCameras","createCamera","updateCamera","deleteCamera","startCamera","stopCamera","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE","process","env","REACT_APP_API_BASE","normalizeCamera","raw","_ref","_raw$_id","_raw$name","_raw$rtsp_url","_raw$fps_target","_raw$infer_every_n_fr","_raw$status","id","String","_id","name","rtsp_url","enabled","undefined","Boolean","fps_target","Number","infer_every_n_frames","rawStatus","status","toUpperCase","Cameras","_user$role","_activeVideoCamera$na","user","token","isAdmin","role","loading","setLoading","cameras","setCameras","isDialogOpen","setIsDialogOpen","isVideoModalOpen","setIsVideoModalOpen","activeVideoCamera","setActiveVideoCamera","editingCamera","setEditingCamera","formData","setFormData","streamKey","setStreamKey","Date","now","streamError","setStreamError","isFullscreen","setIsFullscreen","getStreamUrl","cameraId","base","concat","qs","push","encodeURIComponent","join","refresh","data","normalized","Array","isArray","map","e","_e$response","console","error","response","message","pageSize","page","setPage","totalPages","Math","max","ceil","length","p","min","pageData","start","slice","canPrev","canNext","goPrev","goNext","handleStartStop","currentStatus","nextStatus","prev","cam","_objectSpread","success","_e$response2","handleDelete","filter","c","_e$response3","handleEdit","camera","handleSubmit","preventDefault","_e$response4","runningCameras","stoppedCameras","openVideo","closeVideo","reloadStream","className","children","variant","onClick","open","onOpenChange","asChild","disabled","title","onSubmit","value","onChange","target","placeholder","required","checked","onCheckedChange","type","round","size","v","s","src","alt","onError","url"],"sources":["D:/PROYECTO DE TESIS A√ëO 2026/sistema-armas/frontend/src/modules/cameras/ui/Cameras.tsx"],"sourcesContent":["import React, { useMemo, useState, useEffect, useCallback } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"../../../shared/ui/card\";\r\nimport { Button } from \"../../../shared/ui/button\";\r\nimport { Badge } from \"../../../shared/ui/badge\";\r\nimport { Input } from \"../../../shared/ui/input\";\r\nimport { Label } from \"../../../shared/ui/label\";\r\nimport { Switch } from \"../../../shared/ui/switch\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"../../../shared/ui/dialog\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"../../../shared/ui/table\";\r\nimport {\r\n  Play,\r\n  Square,\r\n  Pencil,\r\n  Trash2,\r\n  Plus,\r\n  Video,\r\n  Activity,\r\n  Server,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Eye,\r\n  RefreshCw,\r\n  Maximize2,\r\n  Minimize2,\r\n  X,\r\n  AlertTriangle,\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport {\r\n  listCameras,\r\n  createCamera,\r\n  updateCamera,\r\n  deleteCamera,\r\n  startCamera,\r\n  stopCamera,\r\n} from \"../../../api/cameras\";\r\n\r\nimport { useAuth } from \"../../../context/auth-context\";\r\n\r\ninterface Camera {\r\n  id: string;\r\n  name: string;\r\n  rtsp_url: string;\r\n  enabled: boolean;\r\n  fps_target: number;\r\n  infer_every_n_frames: number;\r\n  status: \"RUNNING\" | \"STOPPED\";\r\n}\r\n\r\nconst API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:8000/api/v1\";\r\n\r\nfunction normalizeCamera(raw: any): Camera {\r\n  const id = String(raw._id ?? raw.id ?? \"\");\r\n  const name = String(raw.name ?? \"C√°mara\");\r\n  const rtsp_url = String(raw.rtsp_url ?? \"0\");\r\n  const enabled = raw.enabled === undefined ? true : Boolean(raw.enabled);\r\n  const fps_target = Number(raw.fps_target ?? 30) || 30;\r\n  const infer_every_n_frames = Number(raw.infer_every_n_frames ?? 5) || 5;\r\n\r\n  const rawStatus = String(raw.status ?? \"\").toUpperCase();\r\n  const status: Camera[\"status\"] =\r\n    rawStatus === \"RUNNING\" || rawStatus === \"STOPPED\"\r\n      ? (rawStatus as Camera[\"status\"])\r\n      : enabled\r\n      ? \"RUNNING\"\r\n      : \"STOPPED\";\r\n\r\n  return { id, name, rtsp_url, enabled, fps_target, infer_every_n_frames, status };\r\n}\r\n\r\nexport function Cameras() {\r\n  const { user, token } = useAuth();\r\n  const isAdmin = user?.role === \"admin\";\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [cameras, setCameras] = useState<Camera[]>([]);\r\n\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [isVideoModalOpen, setIsVideoModalOpen] = useState(false);\r\n  const [activeVideoCamera, setActiveVideoCamera] = useState<Camera | null>(null);\r\n\r\n  const [editingCamera, setEditingCamera] = useState<Camera | null>(null);\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    rtsp_url: \"\",\r\n    enabled: true,\r\n    fps_target: 30,\r\n    infer_every_n_frames: 5,\r\n  });\r\n\r\n  // ------- STREAM -------\r\n  const [streamKey, setStreamKey] = useState<number>(Date.now());\r\n  const [streamError, setStreamError] = useState<string | null>(null);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n\r\n  const getStreamUrl = useCallback(\r\n    (cameraId: string) => {\r\n      const base = `${API_BASE}/inference/stream/${cameraId}`;\r\n      const qs: string[] = [];\r\n      if (token) qs.push(`token=${encodeURIComponent(token)}`);\r\n      qs.push(`t=${streamKey}`); // cache-bust\r\n      return `${base}?${qs.join(\"&\")}`;\r\n    },\r\n    [token, streamKey]\r\n  );\r\n\r\n  async function refresh() {\r\n    try {\r\n      const data = await listCameras();\r\n      const normalized = Array.isArray(data) ? data.map(normalizeCamera) : [];\r\n      setCameras(normalized);\r\n    } catch (e: any) {\r\n      console.error(\"listCameras error:\", e?.response?.status, e?.message);\r\n      toast.error(\"No se pudieron cargar las c√°maras\");\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      await refresh();\r\n      setLoading(false);\r\n    })();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // PAGINACI√ìN\r\n  const pageSize = 5;\r\n  const [page, setPage] = useState(1);\r\n  const totalPages = Math.max(1, Math.ceil(cameras.length / pageSize));\r\n\r\n  useEffect(() => setPage((p) => Math.min(p, totalPages)), [totalPages]);\r\n\r\n  const pageData = useMemo(() => {\r\n    const start = (page - 1) * pageSize;\r\n    return cameras.slice(start, start + pageSize);\r\n  }, [cameras, page]);\r\n\r\n  const canPrev = page > 1;\r\n  const canNext = page < totalPages;\r\n  const goPrev = () => setPage((p) => Math.max(1, p - 1));\r\n  const goNext = () => setPage((p) => Math.min(totalPages, p + 1));\r\n\r\n  const handleStartStop = async (id: string, currentStatus: Camera[\"status\"]) => {\r\n    if (!isAdmin) {\r\n      toast.error(\"No tienes permisos para iniciar/detener c√°maras\");\r\n      return;\r\n    }\r\n\r\n    const nextStatus = currentStatus === \"RUNNING\" ? \"STOPPED\" : \"RUNNING\";\r\n    setCameras((prev) => prev.map((cam) => (cam.id === id ? { ...cam, status: nextStatus } : cam)));\r\n\r\n    try {\r\n      if (currentStatus === \"RUNNING\") {\r\n        await stopCamera(id);\r\n        toast.success(\"üî¥ Detenida\");\r\n      } else {\r\n        await startCamera(id);\r\n        toast.success(\"üü¢ Iniciada\");\r\n      }\r\n    } catch (e: any) {\r\n      console.error(\"start/stop error:\", e?.response?.status, e?.message);\r\n      toast.error(\"No se pudo cambiar el estado\");\r\n      setCameras((prev) => prev.map((cam) => (cam.id === id ? { ...cam, status: currentStatus } : cam)));\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string, name: string) => {\r\n    if (!isAdmin) {\r\n      toast.error(\"No tienes permisos para eliminar c√°maras\");\r\n      return;\r\n    }\r\n\r\n    const prev = cameras;\r\n    setCameras((p) => p.filter((c) => c.id !== id));\r\n\r\n    try {\r\n      await deleteCamera(id);\r\n      toast.success(`C√°mara \"${name}\" eliminada`);\r\n    } catch (e: any) {\r\n      console.error(\"delete error:\", e?.response?.status, e?.message);\r\n      toast.error(\"No se pudo eliminar la c√°mara\");\r\n      setCameras(prev);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (camera: Camera) => {\r\n    if (!isAdmin) {\r\n      toast.error(\"No tienes permisos para editar c√°maras\");\r\n      return;\r\n    }\r\n\r\n    setEditingCamera(camera);\r\n    setFormData({\r\n      name: camera.name,\r\n      rtsp_url: camera.rtsp_url,\r\n      enabled: camera.enabled,\r\n      fps_target: camera.fps_target,\r\n      infer_every_n_frames: camera.infer_every_n_frames,\r\n    });\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!isAdmin) {\r\n      toast.error(\"No tienes permisos para guardar c√°maras\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (editingCamera) {\r\n        await updateCamera(editingCamera.id, formData);\r\n        toast.success(\"C√°mara actualizada\");\r\n      } else {\r\n        await createCamera(formData);\r\n        toast.success(\"C√°mara creada\");\r\n      }\r\n      setIsDialogOpen(false);\r\n      setEditingCamera(null);\r\n      await refresh();\r\n    } catch (e: any) {\r\n      console.error(\"save camera error:\", e?.response?.status, e?.message);\r\n      toast.error(\"No se pudo guardar la c√°mara\");\r\n    }\r\n  };\r\n\r\n  const runningCameras = cameras.filter((c) => c.status === \"RUNNING\").length;\r\n  const stoppedCameras = cameras.filter((c) => c.status === \"STOPPED\").length;\r\n\r\n  // --- OPEN VIDEO MODAL ---\r\n  const openVideo = (camera: Camera) => {\r\n    setActiveVideoCamera(camera);\r\n    setStreamError(null);\r\n    setStreamKey(Date.now()); // nuevo stream\r\n    setIsFullscreen(false);\r\n    setIsVideoModalOpen(true);\r\n  };\r\n\r\n  const closeVideo = () => {\r\n    // forzar que se ‚Äúcorte‚Äù el stream del <img>\r\n    setStreamKey(Date.now());\r\n    setIsVideoModalOpen(false);\r\n    setActiveVideoCamera(null);\r\n    setStreamError(null);\r\n    setIsFullscreen(false);\r\n  };\r\n\r\n  const reloadStream = () => {\r\n    setStreamError(null);\r\n    setStreamKey(Date.now());\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-5\">\r\n      {/* HEADER */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-slate-900\">Gesti√≥n de C√°maras</h1>\r\n          <p className=\"text-sm text-slate-600\">Monitoreo y administraci√≥n de dispositivos</p>\r\n          <p className=\"text-xs text-slate-500 mt-1\">\r\n            Rol actual: <span className=\"font-semibold\">{user?.role ?? \"‚Äî\"}</span>\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          <Button variant=\"outline\" onClick={() => refresh()}>\r\n            Refrescar\r\n          </Button>\r\n\r\n          <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n            <DialogTrigger asChild>\r\n              <Button\r\n                disabled={!isAdmin}\r\n                title={!isAdmin ? \"Solo admin puede crear c√°maras\" : undefined}\r\n                onClick={() => {\r\n                  if (!isAdmin) return;\r\n                  setEditingCamera(null);\r\n                  setFormData({\r\n                    name: \"\",\r\n                    rtsp_url: \"\",\r\n                    enabled: true,\r\n                    fps_target: 30,\r\n                    infer_every_n_frames: 5,\r\n                  });\r\n                }}\r\n              >\r\n                <Plus className=\"h-5 w-5 mr-2\" /> Nueva C√°mara\r\n              </Button>\r\n            </DialogTrigger>\r\n\r\n            <DialogContent className=\"sm:max-w-[500px]\">\r\n              <DialogHeader>\r\n                <DialogTitle className=\"flex items-center gap-2\">\r\n                  <Video className=\"h-5 w-5 text-blue-600\" />\r\n                  {editingCamera ? \"Editar C√°mara\" : \"Nueva C√°mara\"}\r\n                </DialogTitle>\r\n              </DialogHeader>\r\n\r\n              <form onSubmit={handleSubmit} className=\"space-y-4 pt-2\">\r\n                <div className=\"space-y-2\">\r\n                  <Label>Nombre</Label>\r\n                  <Input\r\n                    value={formData.name}\r\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                    placeholder=\"Ej: Pasillo A\"\r\n                    required\r\n                    disabled={!isAdmin}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label>URL RTSP / Fuente</Label>\r\n                  <Input\r\n                    value={formData.rtsp_url}\r\n                    onChange={(e) => setFormData({ ...formData, rtsp_url: e.target.value })}\r\n                    placeholder=\"0 (local) o rtsp://...\"\r\n                    required\r\n                    disabled={!isAdmin}\r\n                  />\r\n                  <p className=\"text-[11px] text-slate-500\">\r\n                    Nota: en servidor (Render) NO funciona webcam \"0\". Usa RTSP/IP cam.\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"flex items-center justify-between p-3 bg-slate-50 rounded-lg border\">\r\n                  <Label>Habilitar detecci√≥n</Label>\r\n                  <Switch\r\n                    checked={formData.enabled}\r\n                    onCheckedChange={(checked) => setFormData({ ...formData, enabled: checked })}\r\n                    disabled={!isAdmin}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label>FPS objetivo</Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      min={1}\r\n                      max={60}\r\n                      value={formData.fps_target}\r\n                      onChange={(e) => setFormData({ ...formData, fps_target: Number(e.target.value) })}\r\n                      disabled={!isAdmin}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Infer cada N frames</Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      min={1}\r\n                      max={60}\r\n                      value={formData.infer_every_n_frames}\r\n                      onChange={(e) =>\r\n                        setFormData({ ...formData, infer_every_n_frames: Number(e.target.value) })\r\n                      }\r\n                      disabled={!isAdmin}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"pt-2\">\r\n                  <Button type=\"submit\" className=\"w-full\" disabled={!isAdmin}>\r\n                    {editingCamera ? \"Actualizar\" : \"Crear\"}\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </div>\r\n      </div>\r\n\r\n      {/* STATS */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <Card className=\"border-0 shadow-sm border-l-4 border-l-emerald-500\">\r\n          <CardContent className=\"pt-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-xs font-bold text-slate-500\">ACTIVAS</p>\r\n                <p className=\"text-2xl font-bold\">{runningCameras}</p>\r\n              </div>\r\n              <Play className=\"h-5 w-5 text-emerald-500\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className=\"border-0 shadow-sm border-l-4 border-l-slate-400\">\r\n          <CardContent className=\"pt-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-xs font-bold text-slate-500\">DETENIDAS</p>\r\n                <p className=\"text-2xl font-bold\">{stoppedCameras}</p>\r\n              </div>\r\n              <Square className=\"h-5 w-5 text-slate-400\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className=\"border-0 shadow-sm border-l-4 border-l-blue-500\">\r\n          <CardContent className=\"pt-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-xs font-bold text-slate-500\">ACTIVIDAD</p>\r\n                <p className=\"text-2xl font-bold\">\r\n                  {cameras.length ? Math.round((runningCameras / cameras.length) * 100) : 0}%\r\n                </p>\r\n              </div>\r\n              <Activity className=\"h-5 w-5 text-blue-500\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* TABLA */}\r\n      <Card className=\"border-0 shadow-sm\">\r\n        <CardHeader className=\"bg-slate-50/50 border-b\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Server className=\"h-4 w-4 text-slate-500\" />\r\n            <CardTitle className=\"text-sm\">Listado de Dispositivos</CardTitle>\r\n          </div>\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"p-0\">\r\n          {loading ? (\r\n            <div className=\"p-6 text-sm text-slate-500\">Cargando c√°maras...</div>\r\n          ) : (\r\n            <>\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>ID</TableHead>\r\n                    <TableHead>C√°mara</TableHead>\r\n                    <TableHead className=\"text-center\">Estado</TableHead>\r\n                    <TableHead className=\"text-right\">Acciones</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n\r\n                <TableBody>\r\n                  {pageData.map((camera) => (\r\n                    <TableRow key={camera.id}>\r\n                      <TableCell className=\"font-mono text-xs\">{camera.id}</TableCell>\r\n                      <TableCell className=\"font-semibold\">{camera.name}</TableCell>\r\n                      <TableCell className=\"text-center\">\r\n                        <Badge\r\n                          className={\r\n                            camera.status === \"RUNNING\"\r\n                              ? \"bg-emerald-100 text-emerald-700\"\r\n                              : \"bg-slate-100 text-slate-600\"\r\n                          }\r\n                        >\r\n                          {camera.status}\r\n                        </Badge>\r\n                      </TableCell>\r\n\r\n                      <TableCell className=\"text-right flex justify-end gap-2\">\r\n                        <Button\r\n                          size=\"sm\"\r\n                          onClick={() => openVideo(camera)}\r\n                          disabled={camera.status === \"STOPPED\"}\r\n                          title={camera.status === \"STOPPED\" ? \"Inicia la c√°mara para ver stream\" : undefined}\r\n                        >\r\n                          <Eye className=\"h-4 w-4 mr-1\" /> Ver\r\n                        </Button>\r\n\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"outline\"\r\n                          onClick={() => handleStartStop(camera.id, camera.status)}\r\n                          disabled={!isAdmin}\r\n                          title={!isAdmin ? \"Solo admin puede iniciar/detener\" : undefined}\r\n                        >\r\n                          {camera.status === \"RUNNING\" ? (\r\n                            <Square className=\"h-4 w-4\" />\r\n                          ) : (\r\n                            <Play className=\"h-4 w-4\" />\r\n                          )}\r\n                        </Button>\r\n\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"outline\"\r\n                          onClick={() => handleEdit(camera)}\r\n                          disabled={!isAdmin}\r\n                          title={!isAdmin ? \"Solo admin puede editar\" : undefined}\r\n                        >\r\n                          <Pencil className=\"h-4 w-4\" />\r\n                        </Button>\r\n\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"outline\"\r\n                          className=\"text-rose-600\"\r\n                          onClick={() => handleDelete(camera.id, camera.name)}\r\n                          disabled={!isAdmin}\r\n                          title={!isAdmin ? \"Solo admin puede eliminar\" : undefined}\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n\r\n              <div className=\"p-4 border-t flex items-center justify-between bg-slate-50/30\">\r\n                <span className=\"text-xs text-slate-500\">\r\n                  P√°gina {page} de {totalPages}\r\n                </span>\r\n                <div className=\"flex gap-2\">\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={goPrev} disabled={!canPrev}>\r\n                    <ChevronLeft className=\"h-4 w-4\" />\r\n                  </Button>\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={goNext} disabled={!canNext}>\r\n                    <ChevronRight className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* MODAL STREAM MEJORADO */}\r\n      <Dialog open={isVideoModalOpen} onOpenChange={(v) => (v ? setIsVideoModalOpen(true) : closeVideo())}>\r\n        <DialogContent\r\n          className={\r\n            isFullscreen\r\n              ? \"p-0 w-[100vw] h-[100vh] max-w-none rounded-none bg-slate-950 border-slate-900\"\r\n              : \"sm:max-w-5xl bg-slate-950 border-slate-800\"\r\n          }\r\n        >\r\n          <DialogHeader className={isFullscreen ? \"px-4 pt-4\" : \"\"}>\r\n            <div className=\"flex items-center justify-between gap-2\">\r\n              <DialogTitle className=\"text-slate-100 uppercase text-xs tracking-widest\">\r\n                En Vivo: {activeVideoCamera?.name ?? \"‚Äî\"}\r\n              </DialogTitle>\r\n\r\n              <div className=\"flex items-center gap-2\">\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  className=\"border-slate-700 text-slate-100 hover:bg-slate-900\"\r\n                  onClick={reloadStream}\r\n                >\r\n                  <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n                  Recargar\r\n                </Button>\r\n\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  className=\"border-slate-700 text-slate-100 hover:bg-slate-900\"\r\n                  onClick={() => setIsFullscreen((s) => !s)}\r\n                >\r\n                  {isFullscreen ? <Minimize2 className=\"h-4 w-4\" /> : <Maximize2 className=\"h-4 w-4\" />}\r\n                </Button>\r\n\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  className=\"border-slate-700 text-slate-100 hover:bg-slate-900\"\r\n                  onClick={closeVideo}\r\n                >\r\n                  <X className=\"h-4 w-4\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </DialogHeader>\r\n\r\n          <div className={isFullscreen ? \"px-4 pb-4\" : \"\"}>\r\n            <div className=\"relative aspect-video bg-black rounded-xl overflow-hidden border border-slate-800\">\r\n              {/* Overlay error */}\r\n              {streamError && (\r\n                <div className=\"absolute inset-0 flex items-center justify-center bg-black/70 z-10 p-6\">\r\n                  <div className=\"max-w-lg text-center text-slate-100 space-y-3\">\r\n                    <div className=\"flex items-center justify-center gap-2\">\r\n                      <AlertTriangle className=\"h-5 w-5 text-amber-400\" />\r\n                      <p className=\"font-bold\">No se pudo cargar el stream</p>\r\n                    </div>\r\n                    <p className=\"text-sm text-slate-300 break-words\">{streamError}</p>\r\n                    <div className=\"flex items-center justify-center gap-2 pt-2\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        className=\"border-slate-700 text-slate-100 hover:bg-slate-900\"\r\n                        onClick={reloadStream}\r\n                      >\r\n                        <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n                        Reintentar\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        className=\"border-slate-700 text-slate-100 hover:bg-slate-900\"\r\n                        onClick={closeVideo}\r\n                      >\r\n                        Cerrar\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {activeVideoCamera && (\r\n                <img\r\n                  key={streamKey} // fuerza reset\r\n                  src={getStreamUrl(activeVideoCamera.id)}\r\n                  alt=\"Live\"\r\n                  className=\"w-full h-full object-contain bg-black\"\r\n                  onError={() => {\r\n                    const url = getStreamUrl(activeVideoCamera.id);\r\n                    setStreamError(\r\n                      `Error cargando MJPEG. Revisa: token v√°lido, c√°mara RUNNING, y que /inference/stream acepte ?token=. URL: ${url}`\r\n                    );\r\n                  }}\r\n                />\r\n              )}\r\n            </div>\r\n\r\n            {activeVideoCamera && (\r\n              <div className=\"mt-3 text-xs text-slate-300 break-all\">\r\n                Stream URL: {getStreamUrl(activeVideoCamera.id)}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}