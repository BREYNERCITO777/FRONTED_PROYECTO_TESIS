{"ast":null,"code":"import{Search,Bell,User,ChevronDown,AlertTriangle,LogOut}from\"lucide-react\";import{Input}from\"../shared/ui/input\";import{Avatar,AvatarFallback,AvatarImage}from\"../shared/ui/avatar\";import{Button}from\"../shared/ui/button\";import{Badge}from\"../shared/ui/badge\";import{SidebarTrigger}from\"../shared/ui/sidebar\";import{DropdownMenu,DropdownMenuContent,DropdownMenuItem,DropdownMenuLabel,DropdownMenuSeparator,DropdownMenuTrigger}from\"../shared/ui/dropdown-menu\";import{useAlerts}from\"../app/providers/alerts-context\";import{useAuth}from\"../context/auth-context\";import{toast}from\"sonner\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function timeAgo(iso){if(!iso)return\"—\";const t=new Date(iso).getTime();const diff=Date.now()-t;const s=Math.max(0,Math.floor(diff/1000));if(s<60)return\"Hace \".concat(s,\"s\");const m=Math.floor(s/60);if(m<60)return\"Hace \".concat(m,\"m\");const h=Math.floor(m/60);if(h<24)return\"Hace \".concat(h,\"h\");const d=Math.floor(h/24);return\"Hace \".concat(d,\"d\");}function initials(name){var _parts$0$,_parts$,_parts$2,_parts;const n=(name||\"\").trim();if(!n)return\"U\";const parts=n.split(/\\s+/).filter(Boolean);const first=(_parts$0$=(_parts$=parts[0])===null||_parts$===void 0?void 0:_parts$[0])!==null&&_parts$0$!==void 0?_parts$0$:\"U\";const last=parts.length>1?(_parts$2=(_parts=parts[parts.length-1])===null||_parts===void 0?void 0:_parts[0])!==null&&_parts$2!==void 0?_parts$2:\"\":\"\";return(first+last).toUpperCase();}export function Topbar(){const{alerts,unreadCount,markAsRead,refresh}=useAlerts();const{user,logout}=useAuth();// Top 6 notificaciones más recientes\nconst recent=alerts.slice(0,6);const displayName=(user===null||user===void 0?void 0:user.name)||(user===null||user===void 0?void 0:user.full_name)||(user===null||user===void 0?void 0:user.username)||\"Usuario\";const email=(user===null||user===void 0?void 0:user.email)||(user===null||user===void 0?void 0:user.mail)||\"\";const role=(user===null||user===void 0?void 0:user.role)||(user===null||user===void 0?void 0:user.type)||\"Usuario\";const avatarUrl=(user===null||user===void 0?void 0:user.avatar_url)||(user===null||user===void 0?void 0:user.avatar)||\"\";const handleLogout=async()=>{try{await logout();// ✅ debe borrar token + user\ntoast.success(\"Sesión cerrada\");}catch(e){var _e$message;console.error(e);toast.error(\"No se pudo cerrar sesión\",{description:String((_e$message=e===null||e===void 0?void 0:e.message)!==null&&_e$message!==void 0?_e$message:e)});}};return/*#__PURE__*/_jsx(\"header\",{className:\"sticky top-0 z-50 border-b bg-white/95 backdrop-blur-md shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-[1600px] mx-auto w-full px-8 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 flex-1\",children:[/*#__PURE__*/_jsx(SidebarTrigger,{className:\"lg:hidden\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-1 max-w-3xl\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Buscar c\\xE1maras, incidentes, evidencias...\",className:\"pl-10 pr-4 bg-slate-50 border-slate-200 focus:bg-white focus:border-blue-300 focus:ring-2 focus:ring-blue-100 transition-all h-10\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 sm:gap-3\",children:[/*#__PURE__*/_jsxs(DropdownMenu,{children:[/*#__PURE__*/_jsx(DropdownMenuTrigger,{asChild:true,children:/*#__PURE__*/_jsxs(Button,{variant:\"ghost\",size:\"icon\",className:\"relative hover:bg-slate-100 transition-colors h-10 w-10 rounded-xl\",onClick:()=>refresh().catch(console.error)// refresca al abrir\n,children:[/*#__PURE__*/_jsx(Bell,{className:\"h-5 w-5 text-slate-600\"}),unreadCount>0&&/*#__PURE__*/_jsx(Badge,{className:\"absolute -top-1 -right-1 h-5 min-w-5 px-1 flex items-center justify-center p-0 text-xs bg-rose-600 hover:bg-rose-600 border-2 border-white shadow-md\",children:unreadCount>99?\"99+\":unreadCount})]})}),/*#__PURE__*/_jsxs(DropdownMenuContent,{align:\"end\",className:\"w-80\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(DropdownMenuLabel,{className:\"font-bold text-base\",children:\"Notificaciones\"}),/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"sm\",className:\"text-xs mr-2\",onClick:()=>refresh().catch(console.error),children:\"Refrescar\"})]}),/*#__PURE__*/_jsx(DropdownMenuSeparator,{}),recent.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-sm text-slate-600\",children:\"No hay notificaciones todav\\xEDa.\"}):recent.map(a=>{const isUnread=!a.read;const dotColor=a.severity===\"critical\"?\"bg-rose-500\":a.severity===\"high\"?\"bg-orange-500\":a.severity===\"medium\"?\"bg-amber-500\":\"bg-slate-400\";const subtitle=a.weapon_type&&a.camera_id?\"\".concat(a.weapon_type,\" detectada en \").concat(a.camera_id):a.weapon_type?\"\".concat(a.weapon_type,\" detectada\"):a.message;return/*#__PURE__*/_jsxs(DropdownMenuItem,{className:\"flex flex-col items-start p-3 cursor-pointer\",onClick:()=>{if(isUnread)markAsRead(a._id).catch(console.error);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1 w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-2 w-2 rounded-full \".concat(dotColor)}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-sm line-clamp-1\",children:a.title||\"Alerta\"}),isUnread&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-auto text-[10px] font-bold text-rose-600\",children:\"NUEVA\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-600 ml-4 line-clamp-2\",children:subtitle}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-400 ml-4 mt-1\",children:timeAgo(a.timestamp)})]},a._id);}),/*#__PURE__*/_jsx(DropdownMenuSeparator,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-2 text-[11px] text-slate-500 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-4 w-4\"}),\"Las alertas se actualizan en tiempo real.\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-6 w-px bg-slate-200 hidden sm:block\"}),/*#__PURE__*/_jsxs(DropdownMenu,{children:[/*#__PURE__*/_jsx(DropdownMenuTrigger,{asChild:true,children:/*#__PURE__*/_jsxs(Button,{variant:\"ghost\",className:\"flex items-center gap-3 hover:bg-slate-100 transition-colors rounded-xl h-10 px-2 sm:px-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-right hidden sm:block\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-slate-900\",children:displayName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:role})]}),/*#__PURE__*/_jsxs(Avatar,{className:\"h-9 w-9 border-2 border-slate-200 shadow-sm\",children:[/*#__PURE__*/_jsx(AvatarImage,{src:avatarUrl}),/*#__PURE__*/_jsx(AvatarFallback,{className:\"bg-gradient-to-br from-blue-600 to-blue-700 text-white font-bold\",children:initials(displayName)})]}),/*#__PURE__*/_jsx(ChevronDown,{className:\"h-4 w-4 text-slate-400 hidden sm:block\"})]})}),/*#__PURE__*/_jsxs(DropdownMenuContent,{align:\"end\",className:\"w-56\",children:[/*#__PURE__*/_jsx(DropdownMenuLabel,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold\",children:displayName}),email?/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500 font-normal\",children:email}):/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-400 font-normal\",children:\"\\u2014\"})]})}),/*#__PURE__*/_jsx(DropdownMenuSeparator,{}),/*#__PURE__*/_jsxs(DropdownMenuItem,{className:\"cursor-pointer\",children:[/*#__PURE__*/_jsx(User,{className:\"h-4 w-4 mr-2\"}),\"Mi Perfil\"]}),/*#__PURE__*/_jsx(DropdownMenuSeparator,{}),/*#__PURE__*/_jsxs(DropdownMenuItem,{className:\"cursor-pointer text-rose-600\",onClick:handleLogout,children:[/*#__PURE__*/_jsx(LogOut,{className:\"h-4 w-4 mr-2\"}),\"Cerrar sesi\\xF3n\"]})]})]})]})]})})});}","map":{"version":3,"names":["Search","Bell","User","ChevronDown","AlertTriangle","LogOut","Input","Avatar","AvatarFallback","AvatarImage","Button","Badge","SidebarTrigger","DropdownMenu","DropdownMenuContent","DropdownMenuItem","DropdownMenuLabel","DropdownMenuSeparator","DropdownMenuTrigger","useAlerts","useAuth","toast","jsx","_jsx","jsxs","_jsxs","timeAgo","iso","t","Date","getTime","diff","now","s","Math","max","floor","concat","m","h","d","initials","name","_parts$0$","_parts$","_parts$2","_parts","n","trim","parts","split","filter","Boolean","first","last","length","toUpperCase","Topbar","alerts","unreadCount","markAsRead","refresh","user","logout","recent","slice","displayName","full_name","username","email","mail","role","type","avatarUrl","avatar_url","avatar","handleLogout","success","e","_e$message","console","error","description","String","message","className","children","placeholder","asChild","variant","size","onClick","catch","align","map","a","isUnread","read","dotColor","severity","subtitle","weapon_type","camera_id","_id","title","timestamp","src"],"sources":["D:/PROYECTO DE TESIS AÑO 2026/sistema-armas/frontend/src/layouts/Topbar.tsx"],"sourcesContent":["import { Search, Bell, User, ChevronDown, AlertTriangle, LogOut } from \"lucide-react\";\r\nimport { Input } from \"../shared/ui/input\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"../shared/ui/avatar\";\r\nimport { Button } from \"../shared/ui/button\";\r\nimport { Badge } from \"../shared/ui/badge\";\r\nimport { SidebarTrigger } from \"../shared/ui/sidebar\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from \"../shared/ui/dropdown-menu\";\r\n\r\nimport { useAlerts } from \"../app/providers/alerts-context\";\r\nimport { useAuth } from \"../context/auth-context\";\r\nimport { toast } from \"sonner\";\r\n\r\nfunction timeAgo(iso?: string | null) {\r\n  if (!iso) return \"—\";\r\n  const t = new Date(iso).getTime();\r\n  const diff = Date.now() - t;\r\n  const s = Math.max(0, Math.floor(diff / 1000));\r\n  if (s < 60) return `Hace ${s}s`;\r\n  const m = Math.floor(s / 60);\r\n  if (m < 60) return `Hace ${m}m`;\r\n  const h = Math.floor(m / 60);\r\n  if (h < 24) return `Hace ${h}h`;\r\n  const d = Math.floor(h / 24);\r\n  return `Hace ${d}d`;\r\n}\r\n\r\nfunction initials(name?: string) {\r\n  const n = (name || \"\").trim();\r\n  if (!n) return \"U\";\r\n  const parts = n.split(/\\s+/).filter(Boolean);\r\n  const first = parts[0]?.[0] ?? \"U\";\r\n  const last = parts.length > 1 ? parts[parts.length - 1]?.[0] ?? \"\" : \"\";\r\n  return (first + last).toUpperCase();\r\n}\r\n\r\nexport function Topbar() {\r\n  const { alerts, unreadCount, markAsRead, refresh } = useAlerts();\r\n  const { user, logout } = useAuth();\r\n\r\n  // Top 6 notificaciones más recientes\r\n  const recent = alerts.slice(0, 6);\r\n\r\n  const displayName =\r\n    (user as any)?.name ||\r\n    (user as any)?.full_name ||\r\n    (user as any)?.username ||\r\n    \"Usuario\";\r\n\r\n  const email =\r\n    (user as any)?.email ||\r\n    (user as any)?.mail ||\r\n    \"\";\r\n\r\n  const role =\r\n    (user as any)?.role ||\r\n    (user as any)?.type ||\r\n    \"Usuario\";\r\n\r\n  const avatarUrl =\r\n    (user as any)?.avatar_url ||\r\n    (user as any)?.avatar ||\r\n    \"\";\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await logout(); // ✅ debe borrar token + user\r\n      toast.success(\"Sesión cerrada\");\r\n    } catch (e: any) {\r\n      console.error(e);\r\n      toast.error(\"No se pudo cerrar sesión\", { description: String(e?.message ?? e) });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <header className=\"sticky top-0 z-50 border-b bg-white/95 backdrop-blur-md shadow-sm\">\r\n      <div className=\"max-w-[1600px] mx-auto w-full px-8 py-3\">\r\n        <div className=\"flex items-center justify-between gap-6\">\r\n          <div className=\"flex items-center gap-3 flex-1\">\r\n            <SidebarTrigger className=\"lg:hidden\" />\r\n\r\n            <div className=\"relative flex-1 max-w-3xl\">\r\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400\" />\r\n              <Input\r\n                placeholder=\"Buscar cámaras, incidentes, evidencias...\"\r\n                className=\"pl-10 pr-4 bg-slate-50 border-slate-200 focus:bg-white focus:border-blue-300 focus:ring-2 focus:ring-blue-100 transition-all h-10\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2 sm:gap-3\">\r\n            {/* NOTIFICACIONES */}\r\n            <DropdownMenu>\r\n              <DropdownMenuTrigger asChild>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className=\"relative hover:bg-slate-100 transition-colors h-10 w-10 rounded-xl\"\r\n                  onClick={() => refresh().catch(console.error)} // refresca al abrir\r\n                >\r\n                  <Bell className=\"h-5 w-5 text-slate-600\" />\r\n\r\n                  {unreadCount > 0 && (\r\n                    <Badge className=\"absolute -top-1 -right-1 h-5 min-w-5 px-1 flex items-center justify-center p-0 text-xs bg-rose-600 hover:bg-rose-600 border-2 border-white shadow-md\">\r\n                      {unreadCount > 99 ? \"99+\" : unreadCount}\r\n                    </Badge>\r\n                  )}\r\n                </Button>\r\n              </DropdownMenuTrigger>\r\n\r\n              <DropdownMenuContent align=\"end\" className=\"w-80\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <DropdownMenuLabel className=\"font-bold text-base\">\r\n                    Notificaciones\r\n                  </DropdownMenuLabel>\r\n\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className=\"text-xs mr-2\"\r\n                    onClick={() => refresh().catch(console.error)}\r\n                  >\r\n                    Refrescar\r\n                  </Button>\r\n                </div>\r\n\r\n                <DropdownMenuSeparator />\r\n\r\n                {recent.length === 0 ? (\r\n                  <div className=\"p-4 text-sm text-slate-600\">\r\n                    No hay notificaciones todavía.\r\n                  </div>\r\n                ) : (\r\n                  recent.map((a: any) => {\r\n                    const isUnread = !a.read;\r\n\r\n                    const dotColor =\r\n                      a.severity === \"critical\"\r\n                        ? \"bg-rose-500\"\r\n                        : a.severity === \"high\"\r\n                        ? \"bg-orange-500\"\r\n                        : a.severity === \"medium\"\r\n                        ? \"bg-amber-500\"\r\n                        : \"bg-slate-400\";\r\n\r\n                    const subtitle =\r\n                      a.weapon_type && a.camera_id\r\n                        ? `${a.weapon_type} detectada en ${a.camera_id}`\r\n                        : a.weapon_type\r\n                        ? `${a.weapon_type} detectada`\r\n                        : a.message;\r\n\r\n                    return (\r\n                      <DropdownMenuItem\r\n                        key={a._id}\r\n                        className=\"flex flex-col items-start p-3 cursor-pointer\"\r\n                        onClick={() => {\r\n                          if (isUnread) markAsRead(a._id).catch(console.error);\r\n                        }}\r\n                      >\r\n                        <div className=\"flex items-center gap-2 mb-1 w-full\">\r\n                          <div className={`h-2 w-2 rounded-full ${dotColor}`} />\r\n                          <span className=\"font-semibold text-sm line-clamp-1\">\r\n                            {a.title || \"Alerta\"}\r\n                          </span>\r\n\r\n                          {isUnread && (\r\n                            <span className=\"ml-auto text-[10px] font-bold text-rose-600\">\r\n                              NUEVA\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n\r\n                        <p className=\"text-xs text-slate-600 ml-4 line-clamp-2\">\r\n                          {subtitle}\r\n                        </p>\r\n\r\n                        <p className=\"text-xs text-slate-400 ml-4 mt-1\">\r\n                          {timeAgo(a.timestamp)}\r\n                        </p>\r\n                      </DropdownMenuItem>\r\n                    );\r\n                  })\r\n                )}\r\n\r\n                <DropdownMenuSeparator />\r\n\r\n                <div className=\"px-3 py-2 text-[11px] text-slate-500 flex items-center gap-2\">\r\n                  <AlertTriangle className=\"h-4 w-4\" />\r\n                  Las alertas se actualizan en tiempo real.\r\n                </div>\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n\r\n            <div className=\"h-6 w-px bg-slate-200 hidden sm:block\" />\r\n\r\n            {/* USUARIO */}\r\n            <DropdownMenu>\r\n              <DropdownMenuTrigger asChild>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  className=\"flex items-center gap-3 hover:bg-slate-100 transition-colors rounded-xl h-10 px-2 sm:px-3\"\r\n                >\r\n                  <div className=\"text-right hidden sm:block\">\r\n                    <p className=\"text-sm font-semibold text-slate-900\">{displayName}</p>\r\n                    <p className=\"text-xs text-slate-500\">{role}</p>\r\n                  </div>\r\n\r\n                  <Avatar className=\"h-9 w-9 border-2 border-slate-200 shadow-sm\">\r\n                    <AvatarImage src={avatarUrl} />\r\n                    <AvatarFallback className=\"bg-gradient-to-br from-blue-600 to-blue-700 text-white font-bold\">\r\n                      {initials(displayName)}\r\n                    </AvatarFallback>\r\n                  </Avatar>\r\n\r\n                  <ChevronDown className=\"h-4 w-4 text-slate-400 hidden sm:block\" />\r\n                </Button>\r\n              </DropdownMenuTrigger>\r\n\r\n              <DropdownMenuContent align=\"end\" className=\"w-56\">\r\n                <DropdownMenuLabel>\r\n                  <div className=\"flex flex-col space-y-1\">\r\n                    <p className=\"text-sm font-semibold\">{displayName}</p>\r\n                    {email ? (\r\n                      <p className=\"text-xs text-slate-500 font-normal\">{email}</p>\r\n                    ) : (\r\n                      <p className=\"text-xs text-slate-400 font-normal\">—</p>\r\n                    )}\r\n                  </div>\r\n                </DropdownMenuLabel>\r\n\r\n                <DropdownMenuSeparator />\r\n\r\n                <DropdownMenuItem className=\"cursor-pointer\">\r\n                  <User className=\"h-4 w-4 mr-2\" />\r\n                  Mi Perfil\r\n                </DropdownMenuItem>\r\n\r\n                <DropdownMenuSeparator />\r\n\r\n                <DropdownMenuItem className=\"cursor-pointer text-rose-600\" onClick={handleLogout}>\r\n                  <LogOut className=\"h-4 w-4 mr-2\" />\r\n                  Cerrar sesión\r\n                </DropdownMenuItem>\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}