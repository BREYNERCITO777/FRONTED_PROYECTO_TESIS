{"ast":null,"code":"// frontend/src/modules/settings/api/settingsService.ts\nconst API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:8000/api/v1\";\nasync function http(url, options) {\n  const res = await fetch(url, options);\n  const text = await res.text();\n  let data = null;\n  try {\n    data = text ? JSON.parse(text) : null;\n  } catch {\n    data = text;\n  }\n  if (!res.ok) {\n    const msg = data && (data.detail || data.message) || `HTTP ${res.status} ${res.statusText}`;\n    throw new Error(msg);\n  }\n  return data;\n}\nexport async function getSettings() {\n  return http(`${API_BASE}/settings`);\n}\n\n/**\r\n * ✅ TU BACKEND ES PATCH /settings (según /docs)\r\n * Por eso debe ser PATCH, no PUT.\r\n */\nexport async function updateSettings(payload) {\n  return http(`${API_BASE}/settings`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(payload)\n  });\n}","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE","http","url","options","res","fetch","text","data","JSON","parse","ok","msg","detail","message","status","statusText","Error","getSettings","updateSettings","payload","method","headers","body","stringify"],"sources":["D:/PROYECTO DE TESIS AÑO 2026/sistema-armas/frontend/src/modules/settings/api/settingsService.ts"],"sourcesContent":["// frontend/src/modules/settings/api/settingsService.ts\r\nconst API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:8000/api/v1\";\r\n\r\nexport type SystemSettings = {\r\n  confidence_threshold: number; // 0.75\r\n  auto_alert: boolean;\r\n  email_notifications: boolean;\r\n  sound_alerts: boolean;\r\n  save_evidence: boolean;\r\n  max_fps: number; // 30\r\n  infer_every_n_frames: number; // 5\r\n  updated_at?: string;\r\n};\r\n\r\nasync function http<T>(url: string, options?: RequestInit): Promise<T> {\r\n  const res = await fetch(url, options);\r\n\r\n  const text = await res.text();\r\n  let data: any = null;\r\n  try {\r\n    data = text ? JSON.parse(text) : null;\r\n  } catch {\r\n    data = text;\r\n  }\r\n\r\n  if (!res.ok) {\r\n    const msg =\r\n      (data && (data.detail || data.message)) ||\r\n      `HTTP ${res.status} ${res.statusText}`;\r\n    throw new Error(msg);\r\n  }\r\n\r\n  return data as T;\r\n}\r\n\r\nexport async function getSettings(): Promise<SystemSettings> {\r\n  return http<SystemSettings>(`${API_BASE}/settings`);\r\n}\r\n\r\n/**\r\n * ✅ TU BACKEND ES PATCH /settings (según /docs)\r\n * Por eso debe ser PATCH, no PUT.\r\n */\r\nexport async function updateSettings(\r\n  payload: Partial<SystemSettings>\r\n): Promise<SystemSettings> {\r\n  return http<SystemSettings>(`${API_BASE}/settings`, {\r\n    method: \"PATCH\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(payload),\r\n  });\r\n}"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,8BAA8B;AAajF,eAAeC,IAAIA,CAAIC,GAAW,EAAEC,OAAqB,EAAc;EACrE,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACH,GAAG,EAAEC,OAAO,CAAC;EAErC,MAAMG,IAAI,GAAG,MAAMF,GAAG,CAACE,IAAI,CAAC,CAAC;EAC7B,IAAIC,IAAS,GAAG,IAAI;EACpB,IAAI;IACFA,IAAI,GAAGD,IAAI,GAAGE,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC,GAAG,IAAI;EACvC,CAAC,CAAC,MAAM;IACNC,IAAI,GAAGD,IAAI;EACb;EAEA,IAAI,CAACF,GAAG,CAACM,EAAE,EAAE;IACX,MAAMC,GAAG,GACNJ,IAAI,KAAKA,IAAI,CAACK,MAAM,IAAIL,IAAI,CAACM,OAAO,CAAC,IACtC,QAAQT,GAAG,CAACU,MAAM,IAAIV,GAAG,CAACW,UAAU,EAAE;IACxC,MAAM,IAAIC,KAAK,CAACL,GAAG,CAAC;EACtB;EAEA,OAAOJ,IAAI;AACb;AAEA,OAAO,eAAeU,WAAWA,CAAA,EAA4B;EAC3D,OAAOhB,IAAI,CAAiB,GAAGJ,QAAQ,WAAW,CAAC;AACrD;;AAEA;AACA;AACA;AACA;AACA,OAAO,eAAeqB,cAAcA,CAClCC,OAAgC,EACP;EACzB,OAAOlB,IAAI,CAAiB,GAAGJ,QAAQ,WAAW,EAAE;IAClDuB,MAAM,EAAE,OAAO;IACfC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEd,IAAI,CAACe,SAAS,CAACJ,OAAO;EAC9B,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}