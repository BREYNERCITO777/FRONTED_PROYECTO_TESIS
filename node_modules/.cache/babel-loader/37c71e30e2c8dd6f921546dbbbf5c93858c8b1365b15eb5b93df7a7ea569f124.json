{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROYECTO DE TESIS A\\xD1O 2026\\\\sistema-armas\\\\frontend\\\\src\\\\app\\\\providers\\\\alerts-context.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// frontend/src/app/providers/alerts-context.tsx\nimport React, { createContext, useContext, useEffect, useMemo, useState, useCallback, useRef } from \"react\";\nimport { http } from \"../../api/http\";\nimport { useAuth } from \"../../context/auth-context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AlertsContext = /*#__PURE__*/createContext(null);\nfunction normalizeSeverity(s) {\n  const v = String(s !== null && s !== void 0 ? s : \"medium\").toLowerCase();\n  if (v === \"critical\") return \"critical\";\n  if (v === \"high\") return \"high\";\n  if (v === \"medium\") return \"medium\";\n  return \"low\";\n}\nfunction normalizeConfidence(c) {\n  if (c == null) return null;\n  const n = Number(c);\n  if (!Number.isFinite(n)) return null;\n  const v = n > 1 ? n / 100 : n; // por si viniera 0-100\n  return Math.max(0, Math.min(1, v));\n}\nfunction normalizeAlert(a) {\n  var _ref, _a$_id, _a$type, _a$title, _a$message, _a$weapon_type, _a$evidence_url, _a$camera_id, _ref2, _a$timestamp;\n  return {\n    _id: String((_ref = (_a$_id = a._id) !== null && _a$_id !== void 0 ? _a$_id : a.id) !== null && _ref !== void 0 ? _ref : \"\"),\n    type: (_a$type = a.type) !== null && _a$type !== void 0 ? _a$type : \"ALERTA\",\n    title: (_a$title = a.title) !== null && _a$title !== void 0 ? _a$title : \"Detección\",\n    message: (_a$message = a.message) !== null && _a$message !== void 0 ? _a$message : \"\",\n    severity: normalizeSeverity(a.severity),\n    weapon_type: (_a$weapon_type = a.weapon_type) !== null && _a$weapon_type !== void 0 ? _a$weapon_type : null,\n    confidence: normalizeConfidence(a.confidence),\n    evidence_url: (_a$evidence_url = a.evidence_url) !== null && _a$evidence_url !== void 0 ? _a$evidence_url : null,\n    camera_id: (_a$camera_id = a.camera_id) !== null && _a$camera_id !== void 0 ? _a$camera_id : null,\n    timestamp: (_ref2 = (_a$timestamp = a.timestamp) !== null && _a$timestamp !== void 0 ? _a$timestamp : a.created_at) !== null && _ref2 !== void 0 ? _ref2 : null,\n    read: !!a.read\n  };\n}\nexport function AlertsProvider({\n  children\n}) {\n  _s();\n  const {\n    user,\n    token\n  } = useAuth();\n  const [alerts, setAlerts] = useState([]);\n  const pollingRef = useRef(null);\n  const refresh = useCallback(async () => {\n    const {\n      data\n    } = await http.get(`/alerts?limit=200`);\n    const arr = (Array.isArray(data) ? data : []).map(normalizeAlert);\n\n    // orden desc por timestamp ISO\n    arr.sort((a, b) => {\n      var _b$timestamp, _a$timestamp2;\n      return String((_b$timestamp = b.timestamp) !== null && _b$timestamp !== void 0 ? _b$timestamp : \"\").localeCompare(String((_a$timestamp2 = a.timestamp) !== null && _a$timestamp2 !== void 0 ? _a$timestamp2 : \"\"));\n    });\n    setAlerts(arr);\n  }, []);\n  const markAsRead = useCallback(async id => {\n    // optimistic\n    setAlerts(prev => prev.map(a => a._id === id ? {\n      ...a,\n      read: true\n    } : a));\n    try {\n      await http.patch(`/alerts/${id}/read?read=true`);\n    } catch (e) {\n      setAlerts(prev => prev.map(a => a._id === id ? {\n        ...a,\n        read: false\n      } : a));\n      throw e;\n    }\n  }, []);\n  const markAllAsRead = useCallback(async () => {\n    const unread = alerts.filter(a => !a.read);\n    if (unread.length === 0) return;\n    setAlerts(prev => prev.map(a => ({\n      ...a,\n      read: true\n    })));\n    try {\n      await Promise.all(unread.map(a => http.patch(`/alerts/${a._id}/read?read=true`)));\n    } catch (e) {\n      await refresh();\n      throw e;\n    }\n  }, [alerts, refresh]);\n  const deleteAlert = useCallback(async id => {\n    // backend valida rol admin, pero aquí no dependemos de user.role para no romper\n    const prev = alerts;\n    setAlerts(p => p.filter(a => a._id !== id));\n    try {\n      await http.delete(`/alerts/${id}`);\n    } catch (e) {\n      setAlerts(prev);\n      throw e;\n    }\n  }, [alerts]);\n  const unreadCount = useMemo(() => alerts.filter(a => !a.read).length, [alerts]);\n\n  // ✅ POLLING: cada 4s (ajusta a 5–8s si quieres menos carga)\n  useEffect(() => {\n    // si no hay sesión -> parar polling y limpiar\n    if (!user || !token) {\n      if (pollingRef.current) window.clearInterval(pollingRef.current);\n      pollingRef.current = null;\n      setAlerts([]);\n      return;\n    }\n\n    // carga inmediata\n    refresh().catch(console.error);\n    if (pollingRef.current) window.clearInterval(pollingRef.current);\n    pollingRef.current = window.setInterval(() => {\n      refresh().catch(() => {});\n    }, 4000);\n    return () => {\n      if (pollingRef.current) window.clearInterval(pollingRef.current);\n      pollingRef.current = null;\n    };\n  }, [user === null || user === void 0 ? void 0 : user._id, token, refresh]);\n  return /*#__PURE__*/_jsxDEV(AlertsContext.Provider, {\n    value: {\n      alerts,\n      unreadCount,\n      refresh,\n      markAsRead,\n      markAllAsRead,\n      deleteAlert\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 5\n  }, this);\n}\n_s(AlertsProvider, \"pWV0KT1sLtnzu7/dKENqlEOHqWU=\", false, function () {\n  return [useAuth];\n});\n_c = AlertsProvider;\nexport function useAlerts() {\n  _s2();\n  const ctx = useContext(AlertsContext);\n  if (!ctx) throw new Error(\"useAlerts debe usarse dentro de <AlertsProvider/>\");\n  return ctx;\n}\n_s2(useAlerts, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nvar _c;\n$RefreshReg$(_c, \"AlertsProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useMemo","useState","useCallback","useRef","http","useAuth","jsxDEV","_jsxDEV","AlertsContext","normalizeSeverity","s","v","String","toLowerCase","normalizeConfidence","c","n","Number","isFinite","Math","max","min","normalizeAlert","a","_ref","_a$_id","_a$type","_a$title","_a$message","_a$weapon_type","_a$evidence_url","_a$camera_id","_ref2","_a$timestamp","_id","id","type","title","message","severity","weapon_type","confidence","evidence_url","camera_id","timestamp","created_at","read","AlertsProvider","children","_s","user","token","alerts","setAlerts","pollingRef","refresh","data","get","arr","Array","isArray","map","sort","b","_b$timestamp","_a$timestamp2","localeCompare","markAsRead","prev","patch","e","markAllAsRead","unread","filter","length","Promise","all","deleteAlert","p","delete","unreadCount","current","window","clearInterval","catch","console","error","setInterval","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAlerts","_s2","ctx","Error","$RefreshReg$"],"sources":["D:/PROYECTO DE TESIS AÑO 2026/sistema-armas/frontend/src/app/providers/alerts-context.tsx"],"sourcesContent":["// frontend/src/app/providers/alerts-context.tsx\r\nimport React, {\r\n  createContext,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n  useCallback,\r\n  useRef,\r\n} from \"react\";\r\nimport { http } from \"../../api/http\";\r\nimport { useAuth } from \"../../context/auth-context\";\r\n\r\ntype Severity = \"critical\" | \"high\" | \"medium\" | \"low\";\r\n\r\nexport interface AlertApi {\r\n  _id: string;\r\n  type?: string;\r\n  title: string;\r\n  message: string;\r\n  severity: Severity;\r\n  weapon_type?: string | null;\r\n  confidence?: number | null;\r\n  evidence_url?: string | null;\r\n  camera_id?: string | null;\r\n  timestamp?: string | null;\r\n  read?: boolean;\r\n}\r\n\r\ntype AlertsContextValue = {\r\n  alerts: AlertApi[];\r\n  unreadCount: number;\r\n  refresh: () => Promise<void>;\r\n  markAsRead: (id: string) => Promise<void>;\r\n  markAllAsRead: () => Promise<void>;\r\n  deleteAlert: (id: string) => Promise<void>; // solo admin (backend valida)\r\n};\r\n\r\nconst AlertsContext = createContext<AlertsContextValue | null>(null);\r\n\r\nfunction normalizeSeverity(s: any): Severity {\r\n  const v = String(s ?? \"medium\").toLowerCase();\r\n  if (v === \"critical\") return \"critical\";\r\n  if (v === \"high\") return \"high\";\r\n  if (v === \"medium\") return \"medium\";\r\n  return \"low\";\r\n}\r\n\r\nfunction normalizeConfidence(c: any): number | null {\r\n  if (c == null) return null;\r\n  const n = Number(c);\r\n  if (!Number.isFinite(n)) return null;\r\n  const v = n > 1 ? n / 100 : n; // por si viniera 0-100\r\n  return Math.max(0, Math.min(1, v));\r\n}\r\n\r\nfunction normalizeAlert(a: any): AlertApi {\r\n  return {\r\n    _id: String(a._id ?? a.id ?? \"\"),\r\n    type: a.type ?? \"ALERTA\",\r\n    title: a.title ?? \"Detección\",\r\n    message: a.message ?? \"\",\r\n    severity: normalizeSeverity(a.severity),\r\n    weapon_type: a.weapon_type ?? null,\r\n    confidence: normalizeConfidence(a.confidence),\r\n    evidence_url: a.evidence_url ?? null,\r\n    camera_id: a.camera_id ?? null,\r\n    timestamp: a.timestamp ?? a.created_at ?? null,\r\n    read: !!a.read,\r\n  };\r\n}\r\n\r\nexport function AlertsProvider({ children }: { children: React.ReactNode }) {\r\n  const { user, token } = useAuth();\r\n  const [alerts, setAlerts] = useState<AlertApi[]>([]);\r\n  const pollingRef = useRef<number | null>(null);\r\n\r\n  const refresh = useCallback(async () => {\r\n    const { data } = await http.get(`/alerts?limit=200`);\r\n    const arr = (Array.isArray(data) ? data : []).map(normalizeAlert);\r\n\r\n    // orden desc por timestamp ISO\r\n    arr.sort((a: AlertApi, b: AlertApi) =>\r\n      String(b.timestamp ?? \"\").localeCompare(String(a.timestamp ?? \"\"))\r\n    );\r\n\r\n    setAlerts(arr);\r\n  }, []);\r\n\r\n  const markAsRead = useCallback(async (id: string) => {\r\n    // optimistic\r\n    setAlerts((prev) => prev.map((a) => (a._id === id ? { ...a, read: true } : a)));\r\n    try {\r\n      await http.patch(`/alerts/${id}/read?read=true`);\r\n    } catch (e) {\r\n      setAlerts((prev) => prev.map((a) => (a._id === id ? { ...a, read: false } : a)));\r\n      throw e;\r\n    }\r\n  }, []);\r\n\r\n  const markAllAsRead = useCallback(async () => {\r\n    const unread = alerts.filter((a) => !a.read);\r\n    if (unread.length === 0) return;\r\n\r\n    setAlerts((prev) => prev.map((a) => ({ ...a, read: true })));\r\n    try {\r\n      await Promise.all(unread.map((a) => http.patch(`/alerts/${a._id}/read?read=true`)));\r\n    } catch (e) {\r\n      await refresh();\r\n      throw e;\r\n    }\r\n  }, [alerts, refresh]);\r\n\r\n  const deleteAlert = useCallback(async (id: string) => {\r\n    // backend valida rol admin, pero aquí no dependemos de user.role para no romper\r\n    const prev = alerts;\r\n    setAlerts((p) => p.filter((a) => a._id !== id));\r\n    try {\r\n      await http.delete(`/alerts/${id}`);\r\n    } catch (e) {\r\n      setAlerts(prev);\r\n      throw e;\r\n    }\r\n  }, [alerts]);\r\n\r\n  const unreadCount = useMemo(() => alerts.filter((a) => !a.read).length, [alerts]);\r\n\r\n  // ✅ POLLING: cada 4s (ajusta a 5–8s si quieres menos carga)\r\n  useEffect(() => {\r\n    // si no hay sesión -> parar polling y limpiar\r\n    if (!user || !token) {\r\n      if (pollingRef.current) window.clearInterval(pollingRef.current);\r\n      pollingRef.current = null;\r\n      setAlerts([]);\r\n      return;\r\n    }\r\n\r\n    // carga inmediata\r\n    refresh().catch(console.error);\r\n\r\n    if (pollingRef.current) window.clearInterval(pollingRef.current);\r\n    pollingRef.current = window.setInterval(() => {\r\n      refresh().catch(() => {});\r\n    }, 4000);\r\n\r\n    return () => {\r\n      if (pollingRef.current) window.clearInterval(pollingRef.current);\r\n      pollingRef.current = null;\r\n    };\r\n  }, [user?._id, token, refresh]);\r\n\r\n  return (\r\n    <AlertsContext.Provider\r\n      value={{ alerts, unreadCount, refresh, markAsRead, markAllAsRead, deleteAlert }}\r\n    >\r\n      {children}\r\n    </AlertsContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAlerts() {\r\n  const ctx = useContext(AlertsContext);\r\n  if (!ctx) throw new Error(\"useAlerts debe usarse dentro de <AlertsProvider/>\");\r\n  return ctx;\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}